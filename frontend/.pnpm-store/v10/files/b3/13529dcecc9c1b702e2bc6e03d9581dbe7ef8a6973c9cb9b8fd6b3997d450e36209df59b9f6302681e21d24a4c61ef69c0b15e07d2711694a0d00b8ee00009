var yu=Object.defineProperty;var Fu=(p,X,$e)=>X in p?yu(p,X,{enumerable:!0,configurable:!0,writable:!0,value:$e}):p[X]=$e;var s=(p,X,$e)=>Fu(p,typeof X!="symbol"?X+"":X,$e);this.tmajs=this.tmajs||{};this.tmajs.sdk=function(p){"use strict";let X;function $e(t,e){X?X.set(t,e):e()}function Je(t){if(X)return t();X=new Map;try{t()}finally{X.forEach(e=>e()),X=void 0}}function W(t,e){e||(e={});const n=e.equals||Object.is;let r=[],o=t;const i=l=>{if(!n(o,l)){const d=o;o=l,$e(c,()=>{[...r].forEach(([f,b])=>{f(l,d),b&&u(f,!0)})})}};function a(l){const d=typeof l!="object"?{once:l}:l;return{once:d.once||!1,signal:d.signal||!1}}const u=(l,d)=>{const f=a(d),b=r.findIndex(([w,F])=>w===l&&F.once===f.once&&F.signal===f.signal);b>=0&&r.splice(b,1)},c=Object.assign(function(){return Es(c),o},{destroy(){r=[]},set:i,reset(){i(t)},sub(l,d){return r.push([l,a(d)]),()=>u(l,d)},unsub:u,unsubAll(){r=r.filter(l=>l[1].signal)}});return c}const Le=[];function Es(t){Le.length&&Le[Le.length-1].add(t)}function S(t,e){let n=new Set,r;function o(){return r||(r=W(a(),e))}function i(){o().set(a())}function a(){n.forEach(l=>{l.unsub(i,{signal:!0})});const u=new Set;let c;Le.push(u);try{c=t()}finally{Le.pop()}return u.forEach(l=>{l.sub(i,{signal:!0})}),n=u,c}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub(...u){return o().sub(...u)},unsub(...u){o().unsub(...u)},unsubAll(...u){o().unsubAll(...u)}})}var $s=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function Is(t){return t}function vn(t,e,n,r,o,i,a,u,c){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return o(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return i(o(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return a(i(o(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return u(a(i(o(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return c(u(a(i(o(r(n(e(t.apply(this,arguments)))))))))}}}function h(t,e,n,r,o,i,a,u,c){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return o(r(n(e(t))));case 6:return i(o(r(n(e(t)))));case 7:return a(i(o(r(n(e(t))))));case 8:return u(a(i(o(r(n(e(t)))))));case 9:return c(u(a(i(o(r(n(e(t))))))));default:{for(var l=arguments[0],d=1;d<arguments.length;d++)l=arguments[d](l);return l}}}var Re=function(t,e){var n=typeof t=="number"?function(r){return r.length>=t}:t;return function(){var r=Array.from(arguments);return n(arguments)?e.apply(this,r):function(o){return e.apply(void 0,$s([o],r,!1))}}},As={_tag:"None"},qs=function(t){return{_tag:"Some",value:t}},Ts=function(t){return t._tag==="Left"},yn=function(t){return{_tag:"Left",left:t}},Fn=function(t){return{_tag:"Right",right:t}},dt={};function Ms(t,e){return function(n){return function(r){return t.ap(t.map(r,function(o){return function(i){return e.ap(o,i)}}),n)}}}function Bs(t,e){return function(n){return function(r){return t.map(r,function(o){return e.map(o,n)})}}}function ft(t){return function(e,n){return function(r){return t.chain(r,function(o){return t.map(n(o),function(i){var a;return Object.assign({},o,(a={},a[e]=i,a))})})}}}var ye=As,Ie=qs,Ps=function(t,e){return h(t,Vs(e))},Ls=function(t,e){return h(t,js(e))},Rs="Option",Vs=function(t){return function(e){return Ve(e)?ye:Ie(t(e.value))}},Os=Ie,js=function(t){return function(e){return Ve(e)||Ve(t)?ye:Ie(e.value(t.value))}},Ds=Re(2,function(t,e){return Ve(t)?ye:e(t.value)}),Us={URI:Rs,map:Ps,ap:Ls,chain:Ds},Ve=function(t){return t._tag==="None"},Ws=function(t,e){return function(n){return Ve(n)?t():e(n.value)}},_t=Ws,Gs=Os(dt),Sn=ft(Us),M=yn,k=Fn,mt=Re(2,function(t,e){return fe(t)?t:e(t.right)}),bt=function(t,e){return h(t,z(e))},Cn=function(t,e){return h(t,zs(e))},gt="Either",z=function(t){return function(e){return fe(e)?e:k(t(e.right))}},xs={URI:gt,map:bt},Ns=k,Hs=function(t){return function(e){return fe(e)?e:fe(t)?t:k(e.right(t.right))}},zs=Hs,Ks={URI:gt,map:bt,ap:Cn},Js={URI:gt,map:bt,ap:Cn,chain:mt},Qs=function(t,e){return function(n){return fe(n)?M(t(n.left)):k(e(n.right))}},Zs=function(t){return function(e){return fe(e)?M(t(e.left)):e}},fe=Ts,wt=function(t,e){return function(n){return fe(n)?t(n.left):e(n.right)}},Xs=wt,ae=wt,Ys=ae,Ae=function(t,e){try{return k(t())}catch(n){return M(e(n))}},ei=Ns(dt),ti=ft(Js),kn=ti,ni=mt,ri=mt;function si(t){return vn(k,t.of)}function ii(t){return vn(M,t.of)}function oi(t){return Bs(t,xs)}function ai(t){return Ms(t,Ks)}function ui(t){return function(e,n){return t.chain(e,function(r){return fe(r)?t.of(r):n(r.right)})}}function ci(t){return function(e,n,r){return t.map(e,Qs(n,r))}}function li(t){return function(e,n){return function(r){return t.map(r,ae(e,n))}}}var pi=function(t){return Ae(function(){return JSON.parse(t)},Is)},vt=function(t,e){return h(t,hi(e))},En=function(t,e){return h(t,di(e))},hi=function(t){return function(e){return function(){return Promise.resolve().then(e).then(t)}}},di=function(t){return function(e){return function(){return Promise.all([Promise.resolve().then(e),Promise.resolve().then(t)]).then(function(n){var r=n[0],o=n[1];return r(o)})}}},yt=function(t){return function(){return Promise.resolve(t)}},fi=Re(2,function(t,e){return function(){return Promise.resolve().then(t).then(function(n){return e(n)()})}}),Ft="Task",St={URI:Ft,map:vt},$n={of:yt},_i={URI:Ft,map:vt,ap:En},mi={URI:Ft,map:vt,of:yt,ap:En,chain:fi},bi=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(d){try{l(r.next(d))}catch(f){a(f)}}function c(d){try{l(r.throw(d))}catch(f){a(f)}}function l(d){d.done?i(d.value):o(d.value).then(u,c)}l((r=r.apply(t,e||[])).next())})},gi=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(d){return c([l,d])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],o=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},D=ii($n),P=si($n),Ct=yt,Qe=li(St),wi=Qe,In=function(t,e){return function(){return bi(void 0,void 0,void 0,function(){var n;return gi(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t().then(Fn)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,yn(e(n))];case 3:return[2]}})})}},vi=function(t,e){return h(t,A(e))},yi=function(t,e){return h(t,Fi(e))},A=oi(St),Oe=Re(3,ci(St)),Fi=ai(_i),kt=Re(2,ui(mi)),Si=P,Ci="TaskEither",ki={URI:Ci,map:vi,ap:yi,chain:kt},Ei=Si(dt),$i=ft(ki),Ze=$i,te=kt,ue=kt;function Y(t){return typeof t=="function"?t():t}class je{constructor({onMounted:e,restoreState:n,initialState:r,onUnmounted:o,isPageReload:i}){s(this,"_isMounted",W(!1));s(this,"isMounted",S(this._isMounted));s(this,"mount");s(this,"unmount");this.mount=()=>{if(this.isMounted())return k(void 0);const a=Y(i)?n():void 0,u=a?k(a):typeof r=="function"?r():k(r);return h(u,z(c=>{Je(()=>{this._isMounted.set(!0),e==null||e(c)})}))},this.unmount=()=>{this._isMounted()&&Je(()=>{this._isMounted.set(!1),o==null||o()})}}}function Et(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=r)}return e}function $t(t,e){const n=Object.keys(t),r=Object.keys(e);return n.length!==r.length?!1:n.every(o=>Object.prototype.hasOwnProperty.call(e,o)&&t[o]===e[o])}class _e{constructor({initialState:e,onChange:n}){s(this,"_state");s(this,"state");s(this,"setState",e=>{const n={...this.state(),...Et(e)};$t(n,this.state())||this._state.set(n)});this._state=W(e,{equals:$t}),this.state=S(this._state),this.state.sub(n)}getter(e){return S(()=>this._state()[e])}hasDiff(e){return!$t({...this.state(),...Et(e)},this.state())}}var ce;function It(t){return{lang:(t==null?void 0:t.lang)??(ce==null?void 0:ce.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(ce==null?void 0:ce.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(ce==null?void 0:ce.abortPipeEarly)}}var At;function Ii(t){return At==null?void 0:At.get(t)}var qt;function Ai(t){return qt==null?void 0:qt.get(t)}var Tt;function qi(t,e){var n;return(n=Tt==null?void 0:Tt.get(t))==null?void 0:n.get(e)}function Ti(t){var n,r;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor)==null?void 0:r.name))??"null":e}function J(t,e,n,r,o){const i=o&&"input"in o?o.input:n.value,a=(o==null?void 0:o.expected)??t.expects??null,u=(o==null?void 0:o.received)??Ti(i),c={kind:t.kind,type:t.type,input:i,expected:a,received:u,message:`Invalid ${e}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:t.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=t.kind==="schema",d=(o==null?void 0:o.message)??t.message??qi(t.reference,c.lang)??(l?Ai(c.lang):null)??r.message??Ii(c.lang);d!==void 0&&(c.message=typeof d=="function"?d(c):d),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Q(t){return{version:1,vendor:"valibot",validate(e){return t["~run"]({value:e},It())}}}function An(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function Mi(t,e){const n=[...new Set(t)];return n.length>1?`(${n.join(` ${e} `)})`:n[0]??"never"}var Bi=class extends Error{constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function Xe(t,e){return{kind:"validation",type:"check",reference:Xe,async:!1,expects:null,requirement:t,message:e,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&J(this,"input",n,r),n}}}function Mt(t){return{kind:"validation",type:"integer",reference:Mt,async:!1,expects:null,requirement:Number.isInteger,message:t,"~run"(e,n){return e.typed&&!this.requirement(e.value)&&J(this,"integer",e,n),e}}}function le(t){return{kind:"transformation",type:"transform",reference:le,async:!1,operation:t,"~run"(e){return e.value=this.operation(e.value),e}}}function Pi(t,e,n){return typeof t.fallback=="function"?t.fallback(e,n):t.fallback}function Bt(t,e,n){return typeof t.default=="function"?t.default(e,n):t.default}function Pt(t,e){return!t["~run"]({value:e},{abortEarly:!0}).issues}function qn(){return{kind:"schema",type:"any",reference:qn,expects:"any",async:!1,get"~standard"(){return Q(this)},"~run"(t){return t.typed=!0,t}}}function Tn(t,e){return{kind:"schema",type:"array",reference:Tn,expects:"Array",async:!1,item:t,message:e,get"~standard"(){return Q(this)},"~run"(n,r){var i;const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let a=0;a<o.length;a++){const u=o[a],c=this.item["~run"]({value:u},r);if(c.issues){const l={type:"array",origin:"value",input:o,key:a,value:u};for(const d of c.issues)d.path?d.path.unshift(l):d.path=[l],(i=n.issues)==null||i.push(d);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else J(this,"type",n,r);return n}}}function Fe(t){return{kind:"schema",type:"boolean",reference:Fe,expects:"boolean",async:!1,message:t,get"~standard"(){return Q(this)},"~run"(e,n){return typeof e.value=="boolean"?e.typed=!0:J(this,"type",e,n),e}}}function Ye(t){return{kind:"schema",type:"date",reference:Ye,expects:"Date",async:!1,message:t,get"~standard"(){return Q(this)},"~run"(e,n){return e.value instanceof Date?isNaN(e.value)?J(this,"type",e,n,{received:'"Invalid Date"'}):e.typed=!0:J(this,"type",e,n),e}}}function Lt(t){return{kind:"schema",type:"function",reference:Lt,expects:"Function",async:!1,message:t,get"~standard"(){return Q(this)},"~run"(e,n){return typeof e.value=="function"?e.typed=!0:J(this,"type",e,n),e}}}function Rt(t,e){return{kind:"schema",type:"instance",reference:Rt,expects:t.name,async:!1,class:t,message:e,get"~standard"(){return Q(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:J(this,"type",n,r),n}}}function G(t,e){return{kind:"schema",type:"loose_object",reference:G,expects:"Object",async:!1,entries:t,message:e,get"~standard"(){return Q(this)},"~run"(n,r){var i;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in o||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in o?o[a]:Bt(u),l=u["~run"]({value:c},r);if(l.issues){const d={type:"object",origin:"value",input:o,key:a,value:c};for(const f of l.issues)f.path?f.path.unshift(d):f.path=[d],(i=n.issues)==null||i.push(f);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.fallback!==void 0)n.value[a]=Pi(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(J(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:o,key:a,value:o[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in o)An(o,a)&&!(a in this.entries)&&(n.value[a]=o[a])}else J(this,"type",n,r);return n}}}function qe(t,e){return{kind:"schema",type:"nullish",reference:qe,expects:`(${t.expects} | null | undefined)`,async:!1,wrapped:t,default:e,get"~standard"(){return Q(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=Bt(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function me(t){return{kind:"schema",type:"number",reference:me,expects:"number",async:!1,message:t,get"~standard"(){return Q(this)},"~run"(e,n){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:J(this,"type",e,n),e}}}function q(t,e){return{kind:"schema",type:"optional",reference:q,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:e,get"~standard"(){return Q(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Bt(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Vt(t,e,n){return{kind:"schema",type:"record",reference:Vt,expects:"Object",async:!1,key:t,value:e,message:n,get"~standard"(){return Q(this)},"~run"(r,o){var a,u;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const c in i)if(An(i,c)){const l=i[c],d=this.key["~run"]({value:c},o);if(d.issues){const b={type:"object",origin:"key",input:i,key:c,value:l};for(const w of d.issues)w.path=[b],(a=r.issues)==null||a.push(w);if(r.issues||(r.issues=d.issues),o.abortEarly){r.typed=!1;break}}const f=this.value["~run"]({value:l},o);if(f.issues){const b={type:"object",origin:"value",input:i,key:c,value:l};for(const w of f.issues)w.path?w.path.unshift(b):w.path=[b],(u=r.issues)==null||u.push(w);if(r.issues||(r.issues=f.issues),o.abortEarly){r.typed=!1;break}}(!d.typed||!f.typed)&&(r.typed=!1),d.typed&&(r.value[d.value]=f.value)}}else J(this,"type",r,o);return r}}}function y(t){return{kind:"schema",type:"string",reference:y,expects:"string",async:!1,message:t,get"~standard"(){return Q(this)},"~run"(e,n){return typeof e.value=="string"?e.typed=!0:J(this,"type",e,n),e}}}function Mn(t){let e;if(t)for(const n of t)e?e.push(...n.issues):e=n.issues;return e}function et(t,e){return{kind:"schema",type:"union",reference:et,expects:Mi(t.map(n=>n.expects),"|"),async:!1,options:t,message:e,get"~standard"(){return Q(this)},"~run"(n,r){let o,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{o=c;break}else a?a.push(c):a=[c]}if(o)return o;if(i){if(i.length===1)return i[0];J(this,"type",n,r,{issues:Mn(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];J(this,"type",n,r,{issues:Mn(a)})}return n}}}function Ot(){return{kind:"schema",type:"unknown",reference:Ot,expects:"unknown",async:!1,get"~standard"(){return Q(this)},"~run"(t){return t.typed=!0,t}}}function be(t,e,n){const r=t["~run"]({value:e},It(n));if(r.issues)throw new Bi(r.issues);return r.value}function ie(...t){return{...t[0],pipe:t,get"~standard"(){return Q(this)},"~run"(e,n){for(const r of t)if(r.kind!=="metadata"){if(e.issues&&(r.kind==="schema"||r.kind==="transformation")){e.typed=!1;break}(!e.issues||!n.abortEarly&&!n.abortPipeEarly)&&(e=r["~run"](e,n))}return e}}}function jt(t,e,n){const r=t["~run"]({value:e},It(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}var Li=Object.defineProperty,Ri=(t,e,n)=>e in t?Li(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bn=(t,e,n)=>Ri(t,typeof e!="symbol"?e+"":e,n),Vi=Object.defineProperty,Oi=(t,e,n)=>e in t?Vi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dt=(t,e,n)=>Oi(t,typeof e!="symbol"?e+"":e,n);function Pn(t){return e=>e instanceof t}function Ln(t,e){const n=class extends Error{constructor(...o){const i=typeof e=="function"?e(...o):typeof e=="string"?[e]:e||[];super(...i),this.name=t}};Dt(n,"is",Pn(n));let r=n;return Object.defineProperty(r,"name",{value:t}),r}function ji(t,e,n){const r=class extends Ln(t,n){constructor(...i){super(...i),Dt(this,"data"),this.data=e(...i)}};Dt(r,"is",Pn(r));let o=r;return Object.defineProperty(o,"name",{value:t}),o}let Rn=class extends Ln("CancelledError","Promise was canceled"){},Ut=class extends ji("TimeoutError",e=>({timeout:e}),(e,n)=>[`Timeout reached: ${e}ms`,{cause:n}]){};const Di=Symbol("resolved");function Ui(t){return{tag:Di,value:t}}function Vn(t,e){return t.reject=e.reject,t.resolve=e.resolve,t}let De=class wn extends Promise{constructor(e,n){let r,o,i,a;typeof e=="function"?(i=e,a=n||{}):a=e||{};let u,c;const l=()=>!!c,d=()=>!!u;let f={};const b=[],w=()=>{b.forEach(g=>g()),b.splice(0,b.length),f={}},F=new AbortController,C=()=>d()||l();super((g,v)=>{const{abortOnResolve:m=!0,abortOnReject:O=!0}=a;o=$=>{var V,L;C()||(g($),u=[$],(V=f.resolved)==null||V.forEach(x=>x($)),(L=f.finalized)==null||L.forEach(x=>x({kind:"resolved",result:$})),w(),m&&F.abort(Ui($)))},r=$=>{var V,L;C()||(v($),c=[$],(V=f.rejected)==null||V.forEach(x=>x($)),(L=f.finalized)==null||L.forEach(x=>x({kind:"rejected",reason:$})),w(),O&&F.abort($))};const{abortSignal:j}=a;if(j){if(j.aborted)return r(j.reason);const $=()=>{r(j.reason)};j.addEventListener("abort",$,!0),b.push(()=>{j.removeEventListener("abort",$,!0)})}const{timeout:U}=a;if(U){const $=setTimeout(()=>{r(new Ut(U))},U);b.push(()=>{clearTimeout($)})}try{const $=()=>{},V=i&&i(o,r,{abortSignal:F.signal,get isRejected(){return l()},get isResolved(){return d()},on(L,x){if(u||c){if(L==="finalized"){const Pe=u?{kind:"resolved",result:u[0]}:{kind:"rejected",reason:c[0]};x(Pe)}else L==="resolved"&&u?x(u[0]):L==="rejected"&&c&&x(c[0]);return $}return f[L]||(f[L]=[]),f[L].push(x),()=>{const Pe=f[L]||[],Ke=Pe.indexOf(x);Ke>=0&&Pe.splice(Ke,1)}},get result(){return u==null?void 0:u[0]},get rejectReason(){return c==null?void 0:c[0]},throwIfRejected(){if(c)throw c[0]}});V instanceof Promise&&V.catch(r)}catch($){r($)}}),Bn(this,"reject"),Bn(this,"resolve"),this.reject=r,this.resolve=o}static fn(e,n){return new wn(async(r,o,i)=>{try{r(await e(i))}catch(a){o(a)}},n)}static resolve(e){return this.fn(()=>e)}static reject(e){return new wn((n,r)=>{r(e)})}cancel(){this.reject(new Rn)}catch(e){return this.then(void 0,e)}finally(e){return Vn(super.finally(e),this)}then(e,n){return Vn(super.then(e,n),this)}};function On(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Wi(t){return t.replace(/_[a-z]/g,e=>e[1].toUpperCase())}function Gi(t){return Object.entries(t).reduce((e,[n,r])=>(e[Wi(n)]=r,e),{})}function Wt(t){const e=Gi(t);for(const n in e){const r=e[n];r&&typeof r=="object"&&!(r instanceof Date)&&(e[n]=Array.isArray(r)?r.map(Wt):Wt(r))}return e}function xi(t){return t.replace(/_([a-z])/g,(e,n)=>`-${n.toLowerCase()}`)}function jn(t){return`tapps/${t}`}function Gt(t,e){sessionStorage.setItem(jn(t),JSON.stringify(e))}function Dn(t){const e=sessionStorage.getItem(jn(t));try{return e?JSON.parse(e):void 0}catch{}}function Ue(...t){const e=t.flat(1);return[e.push.bind(e),()=>{e.forEach(n=>{n()})}]}function Un(t,e){e||(e={});const{textColor:n,bgColor:r,shouldLog:o}=e,i=o===void 0?!0:o,a=typeof i=="boolean"?()=>i:i,u=(c,l,...d)=>{if(l||a()){const f="font-weight:bold;padding:0 5px;border-radius:100px",[b,w,F]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[c];console[c](`%c${F} ${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c %c${t}`,`${f};background-color:${b};color:${w}`,"",`${f};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...d)}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((c,[l,d])=>(c[l]=u.bind(void 0,l,!1),c[d]=u.bind(void 0,l,!0),c),{})}function We(t){const e=n=>{throw n};return typeof t=="function"?De.resolve(h(t,Qe(e,n=>n))()):h(t,ae(e,n=>n))}function ne(t){return Object.assign((...e)=>We(t(...e)),t)}const Te=Object.assign((t,e)=>h(In(()=>new De((n,r,o)=>t(i=>n(k(i)),i=>n(M(i)),o),e),n=>n),ue(ae(D,P))),{fn:(t,e)=>Te((n,r,o)=>{const i=t(o);h(typeof i=="function"?i:Ct(i),wi(r,n))()},e)});var Ni=Object.defineProperty,Hi=(t,e,n)=>e in t?Ni(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xt=(t,e,n)=>Hi(t,typeof e!="symbol"?e+"":e,n);function Wn(t){return e=>e instanceof t}function H(t,e){const n=class extends Error{constructor(...i){const a=typeof e=="function"?e(...i):typeof e=="string"?[e]:e||[];super(...a),this.name=t}};xt(n,"is",Wn(n));let r=n;return Object.defineProperty(r,"name",{value:t}),r}function tt(t,e,n){const r=class extends H(t,n){constructor(...a){super(...a),xt(this,"data"),this.data=e(...a)}};xt(r,"is",Wn(r));let o=r;return Object.defineProperty(o,"name",{value:t}),o}function zi(t){const e=n=>{const r={};return new URLSearchParams(n).forEach((o,i)=>{const a=r[i];Array.isArray(a)?a.push(o):a===void 0?r[i]=o:r[i]=[a,o]}),be(t,r)};return ie(et([y(),Rt(URLSearchParams)]),Xe(n=>{try{return e(n),!0}catch{return!1}},"The value doesn't match required schema"),le(e))}function Ki(t){return ie(y(),Xe(e=>{try{return JSON.parse(e),!0}catch{return!1}},"Input is not a valid JSON value"),le(JSON.parse),t)}function ge(t){return ie(y(),Ki(t))}function Nt(t){return ie(et([y(),Rt(URLSearchParams)]),zi(t))}function nt(t){return e=>t.test(e)}const Gn=nt(/^#[\da-f]{3}$/i),xn=nt(/^#[\da-f]{4}$/i),Ge=nt(/^#[\da-f]{6}$/i),Nn=nt(/^#[\da-f]{8}$/i);function Hn(t){return[Ge,Nn,Gn,xn].some(e=>e(t))}function zn(t){let e="#";for(let n=0;n<t.length-1;n+=1)e+=t[1+n].repeat(2);return e}function rt(t){const e=t.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(e))return k(zn(e.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(e))return k(zn(e.toLowerCase()));if(/^#[\da-f]{6}$/i.test(e))return k(e.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(e))return k(e.toLowerCase());const n=e.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||e.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return n?k(n.slice(1).reduce((r,o)=>r+parseInt(o,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):M(new Error(`Value "${t}" does not satisfy any of known RGB formats.`))}function Kn(t){return h(rt(t),z(e=>e.slice(0,7)))}const Ji=ne(Kn),Qi=ne(rt);function Zi(){return G({id:me(),photo_url:q(y()),type:y(),title:y(),username:q(y())})}function Jn(){return G({added_to_attachment_menu:q(Fe()),allows_write_to_pm:q(Fe()),first_name:y(),id:me(),is_bot:q(Fe()),is_premium:q(Fe()),last_name:q(y()),language_code:q(y()),photo_url:q(y()),username:q(y())})}function Xi(){return G({auth_date:ie(y(),le(t=>new Date(Number(t)*1e3)),Ye()),can_send_after:q(ie(y(),le(Number),Mt())),chat:q(ge(Zi())),chat_type:q(y()),chat_instance:q(y()),hash:y(),query_id:q(y()),receiver:q(ge(Jn())),start_param:q(y()),signature:y(),user:q(ge(Jn()))})}function Qn(){return Nt(Xi())}function Ht(){return Vt(y(),ie(et([y(),me()]),le(t=>typeof t=="number"?`#${(t&16777215).toString(16).padStart(6,"0")}`:t),Xe(Hn)))}function Yi(){const t=q(ie(y(),le(e=>e==="1")));return G({tgWebAppBotInline:t,tgWebAppData:q(Qn()),tgWebAppDefaultColors:q(ge(Ht())),tgWebAppFullscreen:t,tgWebAppPlatform:y(),tgWebAppShowSettings:t,tgWebAppStartParam:q(y()),tgWebAppThemeParams:ge(Ht()),tgWebAppVersion:y()})}function eo(){return Nt(Yi())}function Zn(){return G({eventType:y(),eventData:q(Ot())})}function Xn(t){return Ae(()=>be(Qn(),t),e=>e)}function st(t){return Ae(()=>be(eo(),t),e=>e)}const to=ne(Xn),Yn=ne(st);function er(t,e){return e||(e=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(t).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(i=>[r,String(i)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":e(r,o)]),n),[])).toString()}function tr(t){return er(t)}function nr(t){return er(t,(e,n)=>e==="tgWebAppData"?tr(n):JSON.stringify(n))}function no(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(o){o(n)}),(r=t.get("*"))&&r.slice().map(function(o){o(e,n)})}}}function rr(t){return Pt(G({TelegramWebviewProxy:G({postEvent:Lt()})}),t)}function sr(){try{return window.self!==window.top}catch{return!0}}class ir extends H("MethodUnsupportedError",(e,n)=>[`Method "${e}" is unsupported in Mini Apps version ${n}`]){}class or extends H("MethodParameterUnsupportedError",(e,n,r)=>[`Parameter "${n}" of "${e}" method is unsupported in Mini Apps version ${r}`]){}class ar extends tt("LaunchParamsRetrieveError",e=>({errors:e}),e=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment","","Collected errors:",...e.map(({source:n,error:r})=>`Source: ${n} / ${r instanceof Error?r.message:String(r)}`)].join(`
`)]){}class ur extends H("InvalidLaunchParamsError",(e,n)=>[`Invalid value for launch params: ${e}`,{cause:n}]){}class zt extends H("UnknownEnvError"){}class cr extends H("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]){}const lr="launchParams";function pr(t){return t.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function Me(){return h(xe(),ni(st))}const ro=ne(Me);function Kt(){return h(xe(),z(t=>{const e=new URLSearchParams(t).get("tgWebAppData");return e?Ie(e):ye}))}function so(){return h(Kt(),Ys(t=>{throw t},t=>t),_t(()=>{},t=>t))}function xe(){const t=[];for(const[e,n]of[[()=>pr(window.location.href),"window.location.href"],[()=>{const r=performance.getEntriesByType("navigation")[0];return r&&pr(r.name)},"performance navigation entries"],[()=>Dn(lr),"local storage"]]){const r=e();if(!r){t.push({source:n,error:new Error("Source is empty")});continue}const o=h(st(r),Xs(i=>i,()=>!0));if(typeof o!="boolean"){t.push({source:n,error:o});continue}return Gt(lr,r),k(r)}return M(new ar(t))}const io=ne(xe);function oo(t,e){const n=new Map,r=no(),o=(i,a,u=!1)=>{const c=n.get(i)||new Map;n.set(i,c);const l=c.get(a)||[];c.set(a,l);const d=l.findIndex(f=>f[1]===u);if(d>=0&&(r.off(i,l[d][0]),l.splice(d,1),!l.length&&(c.delete(a),!c.size))){const f=n.size;n.delete(i),f&&!n.size&&e()}};return{on(i,a,u){!n.size&&t();const c=()=>{o(i,a,u)},l=(...b)=>{u&&c(),i==="*"?a({name:b[0],payload:b[1]}):a(...b)};r.on(i,l);const d=n.get(i)||new Map;n.set(i,d);const f=d.get(a)||[];return d.set(a,f),f.push([l,u||!1]),c},off:o,emit:r.emit,clear(){const i=n.size;r.all.clear(),n.clear(),i&&e()}}}function it(t,e){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:t,eventData:e}),source:window.parent}))}const Jt=W(!1),hr=W("https://web.telegram.org"),ao=t=>{pe().log("Event received:",t)},dr=S(Jt);function uo(t){t!==Jt()&&(Jt.set(t),(t?ee:Se)("*",ao))}const fr=S(hr);function co(t){hr.set(t),pe().log("New target origin set",t)}const ot=W((...t)=>{window.parent.postMessage(...t)}),pe=W(Un("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:dr}));function Qt(t,e,n){const r=[n],o=t[e];typeof o=="function"&&r.push(o);const i=(...u)=>{r.forEach(c=>c(...u))},a=Object.assign((...u)=>{i(...u)},{unwrap(){const{length:u}=r;if(u===1){delete t[e];return}if(u===2){br(t,e,r[1]);return}r.unshift(1),br(t,e,i)}});mr(t,e,()=>a,u=>r.push(u))}function _r(t,e){const n=t[e];mr(t,e,()=>n,r=>{Object.entries(r).forEach(([o,i])=>{n[o]=i})})}function mr(t,e,n,r){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:n,set:r})}function br(t,e,n){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}const lo={clipboard_text_received:G({req_id:y(),data:qe(y())}),custom_method_invoked:G({req_id:y(),result:q(Ot()),error:q(y())}),popup_closed:qe(G({button_id:qe(y(),()=>{})}),{}),viewport_changed:qe(G({height:me(),width:qe(me(),()=>window.innerWidth),is_state_stable:Fe(),is_expanded:Fe()}),()=>({height:window.innerHeight,is_state_stable:!0,is_expanded:!0})),theme_changed:G({theme_params:Ht()})};function gr(t){if(t.source!==window.parent)return;let e;try{e=be(ge(Zn()),t.data)}catch{return}const{eventType:n,eventData:r}=e,o=lo[n];let i;try{i=o?be(o,r):r}catch(a){return pe().forceError([`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose"].join(`
`),e,a)}po(n,i)}const{on:ee,off:Se,emit:po,clear:ho}=oo(()=>{const t=window;!t.TelegramGameProxy&&(t.TelegramGameProxy={}),Qt(t.TelegramGameProxy,"receiveEvent",it),_r(t,"TelegramGameProxy"),!t.Telegram&&(t.Telegram={}),!t.Telegram.WebView&&(t.Telegram.WebView={}),Qt(t.Telegram.WebView,"receiveEvent",it),_r(t.Telegram,"WebView"),Qt(t,"TelegramGameProxy_receiveEvent",it),window.addEventListener("message",gr)},()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(t=>{const e=window;let n=[void 0,e];for(const i of t)if(n=[n[1],n[1][i]],!n[1])return;const[r,o]=n;"unwrap"in o&&(o.unwrap(),r&&r!==e&&!Object.keys(r).length&&delete e[t[0]])}),window.removeEventListener("message",gr)}),fo=(...t)=>ot()(...t);function _o(t,e){h(at(t,e),Zs(n=>{throw n}))}function at(t,e){pe().log("Posting event:",e?{eventType:t,eventData:e}:{eventType:t});const n=window,r=JSON.stringify({eventType:t,eventData:e});return sr()?(fo(r,fr()),k(void 0)):rr(n)?(n.TelegramWebviewProxy.postEvent(t,JSON.stringify(e)),k(void 0)):Pt(G({external:G({notify:Lt()})}),n)?(n.external.notify(r),k(void 0)):M(new zt)}function Zt(t,e,n={}){const{capture:r=()=>!0,postEvent:o=at}=n,i=W(),[a,u]=Ue();(Array.isArray(e)?e:[e]).forEach(l=>{a(ee(l,d=>{const f=Array.isArray(e);r(f?{event:l,payload:d}:d)&&i.set([f?{event:l,payload:d}:d])}))});const c=l=>(u(),l);return h(async()=>o(t,n.params),ue(()=>Te((l,d,f)=>{const b=i();if(b)return l(b[0]);const w=C=>{C&&l(C[0])},F=()=>{i.unsub(w)};i.sub(w),f.on("finalized",F)},n)),Oe(c,c))}function mo(t,e){const n=Xt(t,e);return typeof n=="function"?De.fn(()=>We(n)):n}function Xt(t,e){const n=rr(window);if(!t)return n||h(xe(),ae(()=>!1,()=>!0));if(n)return P(!0);const{timeout:r=100}=e||{};return h(Zt("web_app_request_theme","theme_changed",{...e,timeout:r}),Qe(o=>Ut.is(o)||zt.is(o)?k(!1):M(o),()=>k(!0)))}function bo({launchParams:t,onEvent:e,resetPostMessage:n}={}){if(t){const i=typeof t=="string"||t instanceof URLSearchParams?t.toString():nr({...t,tgWebAppData:void 0})+(t.tgWebAppData?`&tgWebAppData=${encodeURIComponent(t.tgWebAppData.toString())}`:"");try{Yn(i)}catch(a){throw new ur(i,a)}Gt("launchParams",i)}if(sr()){if(!e)return;n&&ot.reset();const i=ot();ot.set((...a)=>{const[u]=a,c=()=>{i(...a)};try{const l=be(ge(Zn()),u);e({name:l.eventType,params:l.eventData},c)}catch{c()}});return}const r=window.TelegramWebviewProxy||{},o=r.postEvent||(()=>{});window.TelegramWebviewProxy={...r,postEvent(i,a){const u=()=>{o(i,a)};e?e({name:i,params:a?JSON.parse(a):void 0},u):u()}},pe().log("Environment was mocked by the mockTelegramEnv function")}function wr(t){return({req_id:e})=>e===t}const vr={"6.0":["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"],6.1:["web_app_open_tg_link","web_app_open_invoice","web_app_setup_back_button","web_app_set_background_color","web_app_set_header_color","web_app_trigger_haptic_feedback"],6.2:["web_app_open_popup"],6.4:["web_app_close_scan_qr_popup","web_app_open_scan_qr_popup","web_app_read_text_from_clipboard",{method:"web_app_open_link",param:"try_instant_view"}],6.7:["web_app_switch_inline_query"],6.9:["web_app_invoke_custom_method","web_app_request_write_access","web_app_request_phone",{method:"web_app_set_header_color",param:"color"}],"6.10":["web_app_setup_settings_button"],7.2:["web_app_biometry_get_info","web_app_biometry_open_settings","web_app_biometry_request_access","web_app_biometry_request_auth","web_app_biometry_update_token"],7.6:[{method:"web_app_open_link",param:"try_browser"},{method:"web_app_close",param:"return_back"}],7.7:["web_app_setup_swipe_behavior"],7.8:["web_app_share_to_story"],"7.10":["web_app_setup_secondary_button","web_app_set_bottom_bar_color",{method:"web_app_setup_main_button",param:"has_shine_effect"}],"8.0":["web_app_request_safe_area","web_app_request_content_safe_area","web_app_request_fullscreen","web_app_exit_fullscreen","web_app_set_emoji_status","web_app_add_to_home_screen","web_app_check_home_screen","web_app_request_emoji_status_access","web_app_check_location","web_app_open_location_settings","web_app_request_file_download","web_app_request_location","web_app_send_prepared_message","web_app_start_accelerometer","web_app_start_device_orientation","web_app_start_gyroscope","web_app_stop_accelerometer","web_app_stop_device_orientation","web_app_stop_gyroscope","web_app_toggle_orientation_lock"],"9.0":["web_app_device_storage_clear","web_app_device_storage_get_key","web_app_device_storage_save_key","web_app_secure_storage_clear","web_app_secure_storage_get_key","web_app_secure_storage_restore_key","web_app_secure_storage_save_key"],9.1:["web_app_hide_keyboard"]};function Yt(t,e){return Object.keys(vr).find(n=>vr[n].some(r=>e?typeof r=="object"&&r.method===t&&r.param===e:r===t))||null}function yr(t){return t.split(".").map(Number)}function go(t,e){const n=yr(t),r=yr(e),o=Math.max(n.length,r.length);for(let i=0;i<o;i+=1){const a=n[i]||0,u=r[i]||0;if(a!==u)return a>u?1:-1}return 0}function he(t,e,n){const r=n?Yt(t,e):Yt(t);return r?go(r,n||e)<=0:!1}function wo(t,e="strict"){const n=typeof e=="function"?e:r=>{const{method:o,version:i}=r,a="param"in r?new or(o,r.param,i):new ir(o,i);if(e==="strict")throw a;return pe().forceWarn(a.message)};return(r,o)=>he(r,t)?r==="web_app_set_header_color"&&Pt(G({color:qn()}),o)&&!he(r,"color",t)?n({version:t,method:r,param:"color"}):_o(r,o):n({version:t,method:r})}function vo(t,e,n,r){return h(Zt("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:t,params:e,req_id:n},capture:wr(n)}),te(({result:o,error:i})=>i?D(new cr(i)):P(o)))}function yo(t,e,n={}){const{capture:r=()=>!0,postEvent:o=at}=n,i=W(),[a,u]=Ue();(Array.isArray(e)?e:[e]).forEach(l=>{a(ee(l,d=>{(Array.isArray(e)?r({event:l,payload:d}):r(d))&&i.set([d])}))});const c=l=>(u(),l);return h(async()=>o(t,n.params),ue(()=>Te((l,d,f)=>{const b=i();if(b)return l(b[0]);const w=C=>{C&&l(C[0])},F=()=>{i.unsub(w)};i.sub(w),f.on("finalized",F)},n)),Oe(c,c))}function Fo(){Object.hasOwn||(Object.hasOwn=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)})}function en(t){return Ae(()=>decodeURIComponent(atob(t.replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),e=>e)}const So=ne(en);function tn(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(e,n)=>String.fromCharCode(parseInt(`0x${n}`)))).replace(/\+/g,"-").replace(/\//g,"_")}function Fr(t){const e=tn(typeof t=="string"?t:JSON.stringify(t));return e.length>512?M(new Error("Value is too long for start parameter")):k(e)}const Co=ne(Fr);function ko(t,e){return We(Sr(t,typeof e=="function"?n=>Ae(()=>e(n),r=>r):e))}function Sr(t,e){return h(en(t),ri(n=>e?typeof e=="function"?e(n):pi(n):k(n)))}function Eo(t){return tn(t).length<=512}function oe(t,e){return S(()=>he(t,Y(e)))}function _(t){return Object.assign(ne(t),{ifAvailable(...e){return h(t.ifAvailable(...e),_t(()=>({ok:!1}),n=>({ok:!0,data:We(n)})))}})}function Ce(t){return[t]}class Ne extends tt("ValidationError",(e,n)=>({input:e,issues:n}),"Validation error"){}class ut extends H("CSSVarsBoundError","CSS variables are already bound"){}class Cr extends tt("DeviceStorageMethodError",e=>({error:e}),e=>[e]){}class kr extends tt("SecureStorageMethodError",e=>({error:e}),e=>[e]){}class Er extends H("NotAvailableError",Ce){}class $o extends H("InvalidEnvError",Ce){}class $r extends H("FunctionNotAvailableError",Ce){}class re extends H("InvalidArgumentsError",(e,n)=>[e,{cause:n}]){}class ct extends H("ConcurrentCallError",Ce){}class Ir extends H("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]){}class nn extends H("AccessDeniedError",Ce){}class Ar extends H("FullscreenFailedError",Ce){}class qr extends H("ShareMessageError",Ce){}class Tr extends H("UnknownThemeParamsKeyError",e=>[`Unknown theme params key passed: ${e}`]){}function R(t,e){const n=S(()=>Y(e.version)||"100"),r=S(()=>Y(e.isTma)),{requires:o,returns:i}=e,a=o?typeof o=="object"?o:{every:[o]}:void 0,u=g=>{if(!e.supports)return!0;const v=e.supports[g];return he(v.method,v.param,n())},c=()=>{if(!a)return;const[g,v]="every"in a?["every",a.every]:["some",a.some];for(let m=0;m<v.length;m++){const O=v[m],j=typeof O=="function"?O():he(O,n())?void 0:`it is unsupported in Mini Apps version ${n()}`;if(j&&(g==="every"||m===v.length-1))return j}},l=(...g)=>{for(const v in e.supports)if(e.supports[v].shouldCheck(...g)&&!u(v))return`option ${v} is not supported in Mini Apps version ${n()}`},d=S(()=>!c()),f=S(()=>n()!=="0.0"),b=S(()=>e.isMounted?e.isMounted():!0),w=S(()=>r()&&f()&&d()&&b()),F=g=>{const v=new $r(g);return["task","promise"].includes(e.returns)?D(v):M(v)},C=(...g)=>i==="plain"?Ae(()=>t(...g),v=>v):i==="promise"?In(()=>t(...g),v=>v):t(...g);return Object.assign((...g)=>{var j;const v="Unable to call function:";if(!r())return F(`${v} it can't be called outside Mini Apps`);if(!f())return F(`${v} the SDK was not initialized. Use the SDK init() function`);const m=c();if(m)return F(`${v} ${m}`);const O=l(...g);if(O)return F(`${v} ${O}`);if(!b()){const U=(j=e.isMounting)!=null&&j.call(e)?"mounting. Wait for the mount completion":"unmounted. Use the mount() method";return F(`${v} the component is ${U}`)}return C(...g)},t,{isAvailable:w,ifAvailable(...g){return w()?Ie(C(...g)):ye}},a?{isSupported:d}:{},e.supports?{supports:u}:{})}function T(t){return e=>R(e,t)}class lt{constructor({isTma:e,storage:n,onClick:r,offClick:o,initialState:i,isPageReload:a,postEvent:u,payload:c,method:l,version:d}){s(this,"isMounted");s(this,"isSupported");s(this,"state");s(this,"stateSetters");s(this,"stateBoolSetters");s(this,"setStateFp");s(this,"setState");s(this,"onClickFp");s(this,"onClick");s(this,"offClickFp");s(this,"offClick");s(this,"mountFp");s(this,"mount");s(this,"unmount");const f=new _e({initialState:i,onChange(g){n.set(g)}}),b=new je({initialState:i,isPageReload:a,onMounted:f.setState,restoreState:n.get}),w={version:d,requires:l,isTma:e},F=T({...w,returns:"plain"}),C=T({...w,returns:"either",isMounted:b.isMounted});this.isMounted=b.isMounted,this.isSupported=oe(l,d),this.state=f.state,this.setStateFp=C(g=>{const v={...this.state(),...Et(g)};return f.hasDiff(v)?h(u(l,c(v)),z(()=>{f.setState(v)})):k(void 0)}),this.setState=_(this.setStateFp),this.onClickFp=F(r),this.onClick=_(this.onClickFp),this.offClickFp=F(o),this.offClick=_(this.offClickFp),this.mountFp=F(()=>{const g=()=>{};return h(b.mount(),ae(g,g))}),this.mount=_(this.mountFp),this.unmount=b.unmount,this.stateSetters=g=>{const v=C(m=>this.setStateFp({[g]:m}));return[_(v),v]},this.stateBoolSetters=g=>{const[,v]=this.stateSetters(g),m=C(()=>v(!1)),O=C(()=>v(!0));return[[_(m),m],[_(O),O]]}}stateGetter(e){return S(()=>this.state()[e])}}class Mr{constructor(e){s(this,"isVisible");s(this,"isMounted");s(this,"isSupported");s(this,"hideFp");s(this,"hide");s(this,"showFp");s(this,"show");s(this,"onClickFp");s(this,"onClick");s(this,"offClickFp");s(this,"offClick");s(this,"mountFp");s(this,"mount");s(this,"unmount");const n=new lt({...e,method:"web_app_setup_back_button",payload:r=>({is_visible:r.isVisible}),initialState:{isVisible:!1}});this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.isSupported=n.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}function E(){return{isTma:S(()=>Xt())}}function Be(t){return e=>({...e,...Y(t)})}function He(t,e){return W(t,e)}const Br=He(at),ke=(...t)=>Br()(...t),Pr=(...t)=>We(ke(...t)),K=Be({postEvent:ke});function Io(t){return{get:()=>Dn(t),set(e){Gt(t,e)}}}function Ao(){return performance.getEntriesByType("navigation")[0]}function qo(){const t=Ao();return!!t&&t.type==="reload"}function we(t){return Be({storage:Io(t),isPageReload:qo})}const rn=He("0.0"),I=Be({version:rn});function sn(t,e){return{...h(E(),K,I,we(t)),onClick(n,r){return ee(e,n,r)},offClick(n,r){Se(e,n,r)}}}const To=new Mr(sn("backButton","back_button_pressed"));class on{constructor({initialState:e,onMounted:n,restoreState:r,onUnmounted:o,isPageReload:i}){s(this,"_isMounted",W(!1));s(this,"isMounted",S(this._isMounted));s(this,"mount");s(this,"unmount");this.mount=a=>{if(this._isMounted())return P(void 0);const u=Y(i)?r():void 0;return h(u?P(u):e(a),A(c=>{this._isMounted()||Je(()=>{this._isMounted.set(!0),n==null||n(c)})}))},this.unmount=()=>{this._isMounted()&&Je(()=>{this._isMounted.set(!1),o==null||o()})}}}function Lr(){return new Er("Biometry is not available")}function an(t){let e=!1,n=!1,r="",o=!1,i="",a=!1;return t.available&&(e=!0,n=t.token_saved,r=t.device_id,o=t.access_requested,i=t.type,a=t.access_granted),{available:e,tokenSaved:n,deviceId:r,type:i,accessGranted:a,accessRequested:o}}class Rr{constructor({version:e,request:n,postEvent:r,storage:o,onInfoReceived:i,offInfoReceived:a,isTma:u,isPageReload:c}){s(this,"isAvailable");s(this,"isSupported");s(this,"isMounted");s(this,"state");s(this,"authenticateFp");s(this,"authenticate");s(this,"openSettingsFp");s(this,"openSettings");s(this,"requestAccessFp");s(this,"requestAccess");s(this,"updateTokenFp");s(this,"updateToken");s(this,"mountFp");s(this,"mount");s(this,"unmount");const l=g=>{d.setState(an(g))},d=new _e({initialState:{available:!1,type:"unknown",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1},onChange:o.set}),f=new on({initialState(g){return h(n("web_app_biometry_get_info","biometry_info_received",g),A(an))},isPageReload:c,onMounted(g){d.setState(g),i(l)},onUnmounted(){a(l)},restoreState:o.get}),b={version:e,requires:"web_app_biometry_request_auth",isTma:u},w=T({...b,returns:"either"}),F=T({...b,returns:"task"}),C=T({...b,isMounted:f.isMounted,returns:"task"});this.isAvailable=d.getter("available"),this.isMounted=f.isMounted,this.isSupported=oe("web_app_biometry_request_auth",e),this.state=d.state,this.unmount=f.unmount,this.mountFp=F(f.mount),this.authenticateFp=C(g=>this.isAvailable()?h(n("web_app_biometry_request_auth","biometry_auth_requested",{...g,params:{reason:((g||{}).reason||"").trim()}}),A(v=>(d.setState({token:v.token}),v))):D(Lr())),this.openSettingsFp=w(()=>r("web_app_biometry_open_settings")),this.requestAccessFp=C(g=>h(n("web_app_biometry_request_access","biometry_info_received",{...g,params:{reason:((g||{}).reason||"").trim()}}),te(v=>{const m=an(v);return m.available?(d.setState(m),P(m.accessRequested)):D(Lr())}))),this.updateTokenFp=C((g={})=>{var v;return h(n("web_app_biometry_update_token","biometry_token_updated",{...g,params:{token:g.token||"",reason:(v=g.reason)==null?void 0:v.trim()}}),A(m=>m.status))}),this.authenticate=_(this.authenticateFp),this.openSettings=_(this.openSettingsFp),this.requestAccess=_(this.requestAccessFp),this.updateToken=_(this.updateTokenFp),this.mount=_(this.mountFp)}}const Vr=(t,e,n)=>yo(t,e,{postEvent:ke,...n}),un=(t,e,n)=>Zt(t,e,{postEvent:ke,...n}),Mo=(...t)=>De.fn(()=>Vr(...t)()),Bo=(...t)=>De.fn(()=>un(...t)()),Z=Be({request:un});function Po(){return new Rr({...h(E(),K,I,Z,we("biometry")),offInfoReceived(t){Se("biometry_info_received",t)},onInfoReceived(t){return ee("biometry_info_received",t)}})}const Lo=Po();class Or{constructor({postEvent:e,storage:n,isTma:r,isPageReload:o}){s(this,"isConfirmationEnabled");s(this,"isMounted");s(this,"mountFp");s(this,"mount");s(this,"unmount");s(this,"disableConfirmationFp");s(this,"disableConfirmation");s(this,"enableConfirmationFp");s(this,"enableConfirmation");const i=new _e({initialState:{isConfirmationEnabled:!1},onChange(f){n.set(f)}}),a=new je({onMounted:i.setState,restoreState:n.get,initialState:{isConfirmationEnabled:!1},isPageReload:o}),u={requires:"web_app_setup_closing_behavior",isTma:r},c=T({...u,returns:"plain"}),l=T({...u,returns:"either",isMounted:a.isMounted}),d=f=>f===this.isConfirmationEnabled()?k(void 0):(i.setState({isConfirmationEnabled:f}),e("web_app_setup_closing_behavior",{need_confirmation:f}));this.isConfirmationEnabled=i.getter("isConfirmationEnabled"),this.isMounted=a.isMounted,this.disableConfirmationFp=l(()=>d(!1)),this.enableConfirmationFp=l(()=>d(!0)),this.mountFp=c(()=>{const f=()=>{};return h(a.mount(),ae(f,f))}),this.unmount=a.unmount,this.disableConfirmation=_(this.disableConfirmationFp),this.enableConfirmation=_(this.enableConfirmationFp),this.mount=_(this.mountFp)}}function Ro(){return new Or(h(E(),we("closingBehavior"),K))}const Vo=Ro();class jr{constructor({version:e,isTma:n,invokeCustomMethod:r}){s(this,"isSupported");s(this,"deleteItemFp");s(this,"deleteItem");s(this,"getItemFp");s(this,"getItem");s(this,"getItemsFp");s(this,"getItems");s(this,"getKeysFp");s(this,"getKeys");s(this,"setItemFp");s(this,"setItem");s(this,"clearFp");s(this,"clear");const o=T({version:e,requires:"web_app_invoke_custom_method",isTma:n,returns:"task"});this.isSupported=oe("web_app_invoke_custom_method",e),this.deleteItemFp=o((i,a)=>{const u=Array.isArray(i)?i:[i];return h(u.length?r("deleteStorageValues",{keys:u},a):P(void 0),A(()=>{}))}),this.getItemFp=o((i,a)=>h(this.getItemsFp([i],a),A(u=>u[i]||""))),this.getItemsFp=o((i,a)=>h(i.length?r("getStorageValues",{keys:i},a):P({}),A(u=>({...i.reduce((c,l)=>(c[l]="",c),{}),...be(Vt(y(),y()),u)})))),this.getKeysFp=o(i=>h(r("getStorageKeys",{},i),A(a=>be(Tn(y()),a)))),this.setItemFp=o((i,a,u)=>h(r("saveStorageValue",{key:i,value:a},u),A(()=>{}))),this.clearFp=o(i=>h(this.getKeysFp(i),te(this.deleteItemFp))),this.deleteItem=_(this.deleteItemFp),this.getItem=_(this.getItemFp),this.getItems=_(this.getItemsFp),this.getKeys=_(this.getKeysFp),this.setItem=_(this.setItemFp),this.clear=_(this.clearFp)}}const cn=He(0);function pt(){return cn.set(cn()+1),cn().toString()}function Dr(t,e,n){return vo(t,e,pt(),{...n||{},postEvent:ke})}const ln=Be({invokeCustomMethod:Dr});function Oo(){return new jr(h(E(),I,ln))}const jo=Oo();class Ur{constructor({isTma:e,request:n,version:r,createRequestId:o}){s(this,"getItemFp");s(this,"getItem");s(this,"setItemFp");s(this,"setItem");s(this,"deleteItemFp");s(this,"deleteItem");s(this,"clearFp");s(this,"clear");const i=T({version:r,requires:"web_app_device_storage_get_key",isTma:e,returns:"task"}),a=(u,c,l)=>{const d=o();return h(n(u,["device_storage_failed",c],{params:{...l,req_id:d},capture:f=>"payload"in f?f.payload.req_id===d:!0}),te(f=>f.event==="device_storage_failed"?D(new Cr(f.payload.error||"UNKNOWN_ERROR")):P(f.payload)))};this.getItemFp=i(u=>h(a("web_app_device_storage_get_key","device_storage_key_received",{key:u}),A(c=>c.value))),this.setItemFp=i((u,c)=>h(a("web_app_device_storage_save_key","device_storage_key_saved",{key:u,value:c}),A(()=>{}))),this.deleteItemFp=i(u=>this.setItemFp(u,null)),this.clearFp=i(()=>h(a("web_app_device_storage_clear","device_storage_cleared",{}),A(()=>{}))),this.getItem=_(this.getItemFp),this.setItem=_(this.setItemFp),this.deleteItem=_(this.deleteItemFp),this.clear=_(this.clearFp)}}const Wr=Be({createRequestId:pt});function Do(){return new Ur(h(E(),I,Z,Wr))}const Uo=Do();function Wo({request:t,...e}){return R(n=>h(t("web_app_request_emoji_status_access","emoji_status_access_requested",n),A(r=>r.status)),{...e,requires:"web_app_request_emoji_status_access",returns:"task"})}function Go(){return Wo(h(E(),I,Z))}const Gr=Go(),xo=_(Gr);function No({request:t,...e}){return R((n,r)=>h(t("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:n,duration:(r||{}).duration},...r}),ue(o=>o.event==="emoji_status_failed"?D(new Ir(o.payload.error)):P(void 0))),{...e,requires:"web_app_set_emoji_status",returns:"task"})}function Ho(){return No(h(E(),Z,I))}const xr=Ho(),zo=_(xr);class Nr{constructor({postEvent:e,isTma:n,version:r}){s(this,"isSupported");s(this,"impactOccurredFp");s(this,"impactOccurred");s(this,"notificationOccurredFp");s(this,"notificationOccurred");s(this,"selectionChangedFp");s(this,"selectionChanged");const o="web_app_trigger_haptic_feedback",i=T({requires:o,isTma:n,version:r,returns:"plain"});this.isSupported=oe(o,r),this.impactOccurredFp=i(a=>e(o,{type:"impact",impact_style:a})),this.notificationOccurredFp=i(a=>e(o,{type:"notification",notification_type:a})),this.selectionChangedFp=i(()=>e(o,{type:"selection_change"})),this.impactOccurred=_(this.impactOccurredFp),this.notificationOccurred=_(this.notificationOccurredFp),this.selectionChanged=_(this.selectionChangedFp)}}function Ko(){return new Nr(h(E(),K,I))}const Jo=Ko();function Qo({postEvent:t,...e}){return R(()=>t("web_app_add_to_home_screen"),{...e,requires:"web_app_add_to_home_screen",returns:"either"})}function Zo(){return Qo(h(E(),I,K))}const Hr=Zo(),Xo=_(Hr);function Yo({request:t,...e}){return R(n=>h(t("web_app_check_home_screen","home_screen_checked",n),A(r=>r.status||"unknown")),{...e,requires:"web_app_check_home_screen",returns:"task"})}function ea(){return Yo(h(E(),I,Z))}const zr=ea(),ta=_(zr);class Kr{constructor({retrieveInitData:e}){s(this,"_state",W());s(this,"_raw",W());s(this,"state",S(this._state));s(this,"authDate",this.fromState("auth_date"));s(this,"canSendAfter",this.fromState("can_send_after"));s(this,"canSendAfterDate",S(()=>{const e=this.authDate(),n=this.canSendAfter();return n&&e?new Date(e.getTime()+n*1e3):void 0}));s(this,"chat",this.fromState("chat"));s(this,"chatType",this.fromState("chat_type"));s(this,"chatInstance",this.fromState("chat_instance"));s(this,"hash",this.fromState("hash"));s(this,"queryId",this.fromState("query_id"));s(this,"raw",S(this._raw));s(this,"receiver",this.fromState("receiver"));s(this,"signature",this.fromState("signature"));s(this,"startParam",this.fromState("start_param"));s(this,"user",this.fromState("user"));s(this,"restoreFp");s(this,"restore");this.restoreFp=()=>h(e(),z(_t(()=>{},({raw:n,obj:r})=>{this._state.set(r),this._raw.set(n)}))),this.restore=ne(this.restoreFp)}fromState(e){return S(()=>{const n=this._state();return n?n[e]:void 0})}}function na(){return new Kr({retrieveInitData(){return h(ei,kn("obj",()=>h(Me(),z(({tgWebAppData:t})=>t?Ie(t):ye))),kn("raw",Kt),z(({obj:t,raw:e})=>h(Gs,Sn("obj",()=>t),Sn("raw",()=>e))))}})}const ra=na();class Jr{constructor({version:e,request:n,isTma:r}){s(this,"isOpened");s(this,"isSupported");s(this,"openSlugFp");s(this,"openSlug");s(this,"openUrlFp");s(this,"openUrl");const o=T({version:e,isTma:r,requires:"web_app_open_invoice",returns:"task"}),i=W(!1),a=()=>{i.set(!1)};this.isSupported=oe("web_app_open_invoice",e),this.isOpened=S(i),this.openSlugFp=o((u,c)=>h(this.isOpened()?D(new ct("Invoice is already opened")):P(void 0),te(()=>(i.set(!0),n("web_app_open_invoice","invoice_closed",{...c,params:{slug:u},capture:l=>u===l.slug}))),Oe(l=>(a(),l),l=>(a(),l.status)))),this.openUrlFp=o((u,c)=>{const{hostname:l,pathname:d}=new URL(u,window.location.href);if(l!=="t.me")return D(new re(`Link has unexpected hostname: ${l}`));const f=d.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);return f?this.openSlugFp(f[2],c):D(new re('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"'))}),this.openUrl=_(this.openUrlFp),this.openSlug=_(this.openSlugFp)}}function sa(){return new Jr(h(E(),Z,I))}const ia=sa();function oa({postEvent:t,...e}){return R((n,r={})=>{if(typeof n=="string")try{n=new URL(n)}catch(o){return M(new re(`"${n.toString()}" is invalid URL`,o))}return t("web_app_open_link",{url:n.toString(),try_browser:r.tryBrowser,try_instant_view:r.tryInstantView})},{...e,returns:"either"})}function aa(){return oa(h(E(),K))}const Qr=aa(),ua=_(Qr);function ca({postEvent:t,version:e,...n}){return R(r=>{const o=r.toString();return o.match(/^https:\/\/t.me\/.+/)?he("web_app_open_tg_link",Y(e))?(r=new URL(r),t("web_app_open_tg_link",{path_full:r.pathname+r.search})):(window.location.href=o,k(void 0)):M(new re(`"${o}" is invalid URL`))},{...n,returns:"either"})}function la(){return ca(h(E(),K,I))}const pn=la(),pa=_(pn);function ha({openTelegramLink:t,...e}){return R((n,r)=>t("https://t.me/share/url?"+new URLSearchParams({url:n,text:r||""}).toString().replace(/\+/g,"%20")),{...e,returns:"either"})}function da(){return ha({...E(),openTelegramLink:pn})}const Zr=da(),fa=_(Zr);function _a(t){let e=!1,n,r;return t.available&&(e=!0,n=t.access_requested,r=t.access_granted),{available:e,accessGranted:r||!1,accessRequested:n||!1}}class Xr{constructor({version:e,request:n,postEvent:r,storage:o,isTma:i,isPageReload:a}){s(this,"state");s(this,"isAvailable");s(this,"isAccessGranted");s(this,"isAccessRequested");s(this,"isMounted");s(this,"isSupported");s(this,"openSettingsFp");s(this,"openSettings");s(this,"requestLocationFp");s(this,"requestLocation");s(this,"mountFp");s(this,"mount");s(this,"unmount");const u=new _e({initialState:{available:!1,accessGranted:!1,accessRequested:!1},onChange:o.set}),c=new on({isPageReload:a,restoreState:o.get,onMounted:u.setState,initialState(w){return h(n("web_app_check_location","location_checked",w),A(_a))}}),l={version:e,requires:"web_app_check_location",isTma:i},d=T({...l,returns:"either"}),f=T({...l,returns:"task"}),b=T({...l,returns:"task",isMounted:c.isMounted});this.isAvailable=u.getter("available"),this.isAccessRequested=u.getter("accessRequested"),this.isAccessGranted=u.getter("accessGranted"),this.isSupported=oe("web_app_check_location",e),this.isMounted=c.isMounted,this.state=u.state,this.unmount=c.unmount,this.mountFp=f(c.mount),this.openSettingsFp=d(()=>r("web_app_open_location_settings")),this.requestLocationFp=b(w=>h(n("web_app_request_location","location_requested",w),A(F=>{if(!F.available)return u.setState({available:!1}),null;const{available:C,...g}=F;return g}))),this.mount=_(this.mountFp),this.openSettings=_(this.openSettingsFp),this.requestLocation=_(this.requestLocationFp)}}function ma(){return new Xr(h(E(),K,I,Z,we("locationManager")))}const ba=ma();class Yr{constructor({defaults:e,...n}){s(this,"bgColor");s(this,"hasShineEffect");s(this,"isEnabled");s(this,"isLoaderVisible");s(this,"isVisible");s(this,"isMounted");s(this,"state");s(this,"text");s(this,"textColor");s(this,"showFp");s(this,"show");s(this,"hideFp");s(this,"hide");s(this,"enableFp");s(this,"enable");s(this,"enableShineEffectFp");s(this,"enableShineEffect");s(this,"disableFp");s(this,"disable");s(this,"disableShineEffectFp");s(this,"disableShineEffect");s(this,"setBgColorFp");s(this,"setBgColor");s(this,"setTextColorFp");s(this,"setTextColor");s(this,"setTextFp");s(this,"setText");s(this,"showLoaderFp");s(this,"showLoader");s(this,"hideLoaderFp");s(this,"hideLoader");s(this,"setParamsFp");s(this,"setParams");s(this,"mountFp");s(this,"mount");s(this,"unmount");s(this,"onClickFp");s(this,"onClick");s(this,"offClickFp");s(this,"offClick");const r=new lt({...n,version:"100",initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},method:"web_app_setup_main_button",payload:i=>({has_shine_effect:i.hasShineEffect,is_visible:i.isVisible,is_active:i.isEnabled,is_progress_visible:i.isLoaderVisible,text:i.text,color:i.bgColor,text_color:i.textColor})}),o=(i,a)=>{const u=r.stateGetter(i);return S(()=>u()||Y(a))};this.bgColor=o("bgColor",e.bgColor),this.textColor=o("textColor",e.textColor),this.hasShineEffect=r.stateGetter("hasShineEffect"),this.isEnabled=r.stateGetter("isEnabled"),this.isLoaderVisible=r.stateGetter("isLoaderVisible"),this.text=r.stateGetter("text"),this.isVisible=r.stateGetter("isVisible"),this.isMounted=r.isMounted,this.state=r.state,[this.setBgColor,this.setBgColorFp]=r.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=r.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=r.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=r.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=r.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=r.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=r.stateBoolSetters("isVisible"),this.setParams=r.setState,this.setParamsFp=r.setStateFp,this.onClick=r.onClick,this.onClickFp=r.onClickFp,this.offClick=r.offClick,this.offClickFp=r.offClickFp,this.mount=r.mount,this.mountFp=r.mountFp,this.unmount=r.unmount}}function hn(t,e){document.documentElement.style.setProperty(t,e)}function dn(t){document.documentElement.style.removeProperty(t)}function es(t){return h(rt(t),z(e=>Math.sqrt([.299,.587,.114].reduce((n,r,o)=>{const i=parseInt(e.slice(1+o*2,1+(o+1)*2),16);return n+i*i*r},0))<120))}const fn=ne(es);class ts{constructor({initialState:e,onChange:n,offChange:r,isTma:o,storage:i,isPageReload:a}){s(this,"accentTextColor");s(this,"bgColor");s(this,"buttonColor");s(this,"buttonTextColor");s(this,"bottomBarBgColor");s(this,"destructiveTextColor");s(this,"headerBgColor");s(this,"hintColor");s(this,"linkColor");s(this,"secondaryBgColor");s(this,"sectionBgColor");s(this,"sectionHeaderTextColor");s(this,"sectionSeparatorColor");s(this,"subtitleTextColor");s(this,"textColor");s(this,"_isCssVarsBound",W(!1));s(this,"isCssVarsBound",S(this._isCssVarsBound));s(this,"bindCssVarsFp");s(this,"bindCssVars");s(this,"state");s(this,"isDark",S(()=>{const e=this.bgColor();return!e||fn(e)}));s(this,"isMounted");s(this,"mountFp");s(this,"mount");s(this,"unmount");const u=new _e({initialState:{},onChange:i.set}),c=w=>{u.setState(w.theme_params)},l=new je({initialState:()=>k(Y(e)),isPageReload:a,onMounted(w){u.setState(w),n(c)},onUnmounted(){r(c)},restoreState:i.get}),d={isTma:o,returns:"either"},f=T(d),b=T({...d,isMounted:l.isMounted});this.accentTextColor=u.getter("accent_text_color"),this.bgColor=u.getter("bg_color"),this.buttonColor=u.getter("button_color"),this.buttonTextColor=u.getter("button_text_color"),this.bottomBarBgColor=u.getter("bottom_bar_bg_color"),this.destructiveTextColor=u.getter("destructive_text_color"),this.headerBgColor=u.getter("header_bg_color"),this.hintColor=u.getter("hint_color"),this.linkColor=u.getter("link_color"),this.secondaryBgColor=u.getter("secondary_bg_color"),this.sectionBgColor=u.getter("section_bg_color"),this.sectionHeaderTextColor=u.getter("section_header_text_color"),this.sectionSeparatorColor=u.getter("section_separator_color"),this.subtitleTextColor=u.getter("subtitle_text_color"),this.textColor=u.getter("text_color"),this.state=u.state,this.isMounted=l.isMounted,this.bindCssVarsFp=b(w=>{if(this._isCssVarsBound())return M(new ut);w||(w=g=>`--tg-theme-${xi(g)}`);const F=g=>{Object.entries(u.state()).forEach(([v,m])=>{m&&g(v,m)})},C=()=>{F((g,v)=>{hn(w(g),v)})};return C(),u.state.sub(C),this._isCssVarsBound.set(!0),k(()=>{F(dn),u.state.unsub(C),this._isCssVarsBound.set(!1)})}),this.mountFp=f(l.mount),this.unmount=l.unmount,this.bindCssVars=_(this.bindCssVarsFp),this.mount=_(this.mountFp)}}const _n=He({});function ga(){return new ts({...h(E(),we("themeParams")),offChange(t){Se("theme_changed",t)},onChange(t){ee("theme_changed",t)},initialState:_n})}const ze=ga();function ns(t,e,n){return h(sn(t,e),r=>({...r,defaults:n}))}const wa=new Yr(ns("mainButton","main_button_pressed",{bgColor:S(()=>ze.buttonColor()||"#2481cc"),textColor:S(()=>ze.buttonTextColor()||"#ffffff")}));class rs{constructor({storage:e,isPageReload:n,version:r,postEvent:o,isTma:i,theme:a,onVisibilityChanged:u,offVisibilityChanged:c}){s(this,"isSupported");s(this,"isDark",S(()=>{const e=this.bgColorRgb();return e?fn(e):!1}));s(this,"isActive");s(this,"state");s(this,"isCssVarsBound");s(this,"bindCssVarsFp");s(this,"bindCssVars");s(this,"isMounted");s(this,"mountFp");s(this,"mount");s(this,"unmount");s(this,"bgColor");s(this,"bgColorRgb");s(this,"setBgColorFp");s(this,"setBgColor");s(this,"headerColor");s(this,"headerColorRgb");s(this,"setHeaderColorFp");s(this,"setHeaderColor");s(this,"bottomBarColor");s(this,"bottomBarColorRgb");s(this,"setBottomBarColorFp");s(this,"setBottomBarColor");s(this,"closeFp");s(this,"close");s(this,"readyFp");s(this,"ready");const l=m=>{b.setState({isActive:m.is_visible})},d=m=>{[[this.headerColor,"web_app_set_header_color"],[this.bgColor,"web_app_set_background_color"],[this.bottomBarColor,"web_app_set_bottom_bar_color"]].forEach(([O,j])=>{const U=O();if(!Ge(U)&&(j!=="web_app_set_header_color"||!["bg_color","secondary_bg_color"].includes(U))){const $=m[U];$&&o(j,{color:$})}})},f=new je({initialState(){return k({bgColor:"bg_color",headerColor:"header_bg_color",bottomBarColor:"bottom_bar_bg_color",isActive:!0})},isPageReload:n,onMounted:m=>{u(l),a.sub(d),b.setState(m)},onUnmounted(){c(l),a.unsub(d)},restoreState:e.get});this.isMounted=f.isMounted,this.mountFp=R(()=>{const m=()=>{};return h(f.mount(),ae(m,m))},{isTma:i,returns:"plain"}),this.mount=_(this.mountFp),this.unmount=f.unmount;const b=new _e({initialState:{bgColor:"bg_color",bottomBarColor:"bottom_bar_bg_color",headerColor:"bg_color",isActive:!1},onChange:e.set});this.state=b.state;const w=m=>Ge(m)?m:Y(a)[m],F=m=>S(()=>w(m()));this.isActive=b.getter("isActive"),this.isSupported=S(()=>["web_app_set_header_color","web_app_set_background_color","web_app_set_bottom_bar_color"].some(m=>he(m,Y(r))));const C=W(!1);this.isCssVarsBound=S(C),this.bindCssVarsFp=R(m=>{if(C())return M(new ut);const[O,j]=Ue(()=>{C.set(!1)}),U=($,V)=>{const L=()=>{hn($,V()||null)};L(),O(V.sub(L),dn.bind(null,$))};return m||(m=$=>`--tg-${On($)}`),U(m("bgColor"),this.bgColorRgb),U(m("bottomBarColor"),this.bottomBarColorRgb),U(m("headerColor"),this.headerColorRgb),C.set(!0),k(j)},{isTma:i,returns:"either",isMounted:this.isMounted}),this.bindCssVars=_(this.bindCssVarsFp);const g=m=>{const O=b.getter(m),j=F(O),U={headerColor:"web_app_set_header_color",bgColor:"web_app_set_background_color",bottomBarColor:"web_app_set_bottom_bar_color"}[m],$=R(V=>{if(V===O())return k(void 0);if(U==="web_app_set_header_color"&&(V==="bg_color"||V==="secondary_bg_color"))return h(o("web_app_set_header_color",{color_key:V}),z(()=>{b.setState({[m]:V})}));const L=w(V);return h(L?o(U,{color:L}):M(new Tr(V)),z(()=>{b.setState({[m]:V})}))},{isTma:i,version:r,requires:U,isMounted:this.isMounted,returns:"either",supports:m==="headerColor"?{rgb:{method:"web_app_set_header_color",param:"color",shouldCheck:Ge}}:void 0});return[O,j,_($),$]};[this.bgColor,this.bgColorRgb,this.setBgColor,this.setBgColorFp]=g("bgColor"),[this.headerColor,this.headerColorRgb,this.setHeaderColor,this.setHeaderColorFp]=g("headerColor"),[this.bottomBarColor,this.bottomBarColorRgb,this.setBottomBarColor,this.setBottomBarColorFp]=g("bottomBarColor");const v=T({isTma:i,returns:"either"});this.closeFp=v(m=>o("web_app_close",{return_back:m})),this.close=_(this.closeFp),this.readyFp=v(()=>o("web_app_ready")),this.ready=_(this.readyFp)}}function va(){return new rs({...h(E(),K,I,we("miniApp")),offVisibilityChanged(t){Se("visibility_changed",t)},onVisibilityChanged(t){ee("visibility_changed",t)},theme:ze.state})}const ss=va();function ya(t){const e=t.message.trim(),n=(t.title||"").trim(),r=t.buttons||[];if(n.length>64)return M(new re(`Invalid title: ${n}`));if(!e||e.length>256)return M(new re(`Invalid message: ${e}`));if(r.length>3)return M(new re(`Invalid buttons count: ${r.length}`));const o=[];if(!r.length)o.push({type:"close",id:""});else for(let i=0;i<r.length;i++){const a=r[i],u=a.id||"";if(u.length>64)return M(new re(`Button with index ${i} has invalid id: ${u}`));if(!a.type||a.type==="default"||a.type==="destructive"){const c=a.text.trim();if(!c||c.length>64)return M(new re(`Button with index ${i} has invalid text: ${c}`));o.push({type:a.type,text:c,id:u})}else o.push({type:a.type,id:u})}return k({title:n,message:e,buttons:o})}class is{constructor({version:e,isTma:n,request:r}){s(this,"isOpened");s(this,"isSupported");s(this,"showFp");s(this,"show");const o=W(!1),i=()=>{o.set(!1)},a=T({version:e,isTma:n,requires:"web_app_open_popup",returns:"task"});this.isSupported=oe("web_app_open_popup",e),this.isOpened=S(o),this.showFp=a(u=>h(this.isOpened()?D(new ct("A popup is already opened")):P(void 0),ue(()=>Ct(ya(u))),te(c=>(o.set(!0),r("web_app_open_popup","popup_closed",{...u,params:c}))),Oe(c=>(i(),c),c=>(i(),c.button_id)))),this.show=_(this.showFp)}}function Fa(){return new is(h(E(),Z,I))}const Sa=Fa();function Ca({request:t,...e}){return R(n=>h(t("web_app_request_phone","phone_requested",n),A(r=>r.status)),{...e,requires:"web_app_request_phone",returns:"task"})}function ka(){return Ca(h(E(),I,Z))}const mn=ka(),Ea=_(mn);function $a({invokeCustomMethod:t,requestPhoneAccess:e,...n}){const r=a=>h(t("getRequestedContact",{},{...a,timeout:(a||{}).timeout||5e3}),ue(u=>{const c=jt(y(),u);if(!c.success)return D(new Ne(u,c.issues));if(!c.output)return P(void 0);const l=jt(Nt(G({contact:ge(G({user_id:me(),phone_number:y(),first_name:y(),last_name:q(y())})),auth_date:ie(y(),le(d=>new Date(Number(d)*1e3)),Ye()),hash:y()})),c.output);return l.success?P({raw:c.output,parsed:l.output}):D(new Ne(c.output,l.issues))})),o=a=>h(r(a),Qe(u=>Ne.is(u)?M(u):k(void 0),u=>k(u))),i=a=>Te(async(u,c,l)=>{let d=50;for(;!l.isRejected;){const f=await o(l)();if(f._tag==="Left")return c(f.left);if(f.right)return u(f.right);await new Promise(b=>setTimeout(b,d)),d+=50}},a);return R(a=>Te.fn(u=>h(o(u),te(c=>c?P(c):h(e(u),ue(l=>l==="sent"?i(u):D(new nn("User denied access")))))),a),{...n,returns:"task",requires:"web_app_request_phone"})}function Ia(){return $a({...h(E(),ln,I),requestPhoneAccess:mn})}function Aa({requestContact:t,...e}){return R(t,{...e,returns:"task",requires:"web_app_request_phone"})}function qa(){return Aa({...h(E(),I),requestContact(t){return h(bn(t),A(e=>e.parsed))}})}const bn=Ia(),Ta=_(bn),os=qa(),Ma=_(os);function Ba({request:t,...e}){return R(n=>h(t("web_app_request_write_access","write_access_requested",n),A(r=>r.status)),{...e,requires:"web_app_request_write_access",returns:"task"})}function Pa(){return Ba(h(E(),I,Z))}const as=Pa(),La=_(as);class us{constructor({version:e,onClosed:n,onTextReceived:r,isTma:o,postEvent:i}){s(this,"isOpened");s(this,"isSupported");s(this,"captureFp");s(this,"capture");s(this,"closeFp");s(this,"close");s(this,"openFp");s(this,"open");const a={version:e,requires:"web_app_open_scan_qr_popup",isTma:o},u=T({...a,returns:"either"}),c=T({...a,returns:"task"}),l=W(!1),d=()=>{l.set(!1)};this.isSupported=oe("web_app_open_scan_qr_popup",e),this.isOpened=S(l),this.captureFp=c(f=>{let b;return h(this.openFp({...f,onCaptured:w=>{f.capture(w)&&(b=w,this.close())}}),A(()=>b))}),this.closeFp=u(()=>h(i("web_app_close_scan_qr_popup"),z(d))),this.openFp=c(f=>h(l()?D(new ct("The QR Scanner is already opened")):async()=>i("web_app_open_scan_qr_popup",{text:f.text}),ue(()=>{l.set(!0);const[b,w]=Ue(),F=C=>(w(),l.set(!1),C);return h(Te(C=>{b(n(C),l.sub(g=>{g||C()}),r(f.onCaptured))},f),Oe(F,F))}))),this.open=_(this.openFp),this.capture=_(this.captureFp),this.close=_(this.closeFp)}}function Ra(){return new us({...h(E(),K,I),onClosed(t){return ee("scan_qr_popup_closed",t)},onTextReceived(t){return ee("qr_text_received",e=>{t(e.data)})}})}const Va=Ra();class cs{constructor({defaults:e,...n}){s(this,"isSupported");s(this,"position");s(this,"bgColor");s(this,"hasShineEffect");s(this,"isEnabled");s(this,"isLoaderVisible");s(this,"isVisible");s(this,"isMounted");s(this,"state");s(this,"text");s(this,"textColor");s(this,"showFp");s(this,"show");s(this,"hideFp");s(this,"hide");s(this,"enableFp");s(this,"enable");s(this,"enableShineEffectFp");s(this,"enableShineEffect");s(this,"disableFp");s(this,"disable");s(this,"disableShineEffectFp");s(this,"disableShineEffect");s(this,"setBgColorFp");s(this,"setBgColor");s(this,"setTextColorFp");s(this,"setTextColor");s(this,"setTextFp");s(this,"setText");s(this,"setPositionFp");s(this,"setPosition");s(this,"showLoaderFp");s(this,"showLoader");s(this,"hideLoaderFp");s(this,"hideLoader");s(this,"setParamsFp");s(this,"setParams");s(this,"mountFp");s(this,"mount");s(this,"unmount");s(this,"onClickFp");s(this,"onClick");s(this,"offClickFp");s(this,"offClick");const r=new lt({...n,initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Cancel",position:"left"},method:"web_app_setup_secondary_button",payload:i=>({has_shine_effect:i.hasShineEffect,is_visible:i.isVisible,is_active:i.isEnabled,is_progress_visible:i.isLoaderVisible,text:i.text,color:i.bgColor,text_color:i.textColor,position:i.position})}),o=(i,a)=>{const u=r.stateGetter(i);return S(()=>u()||Y(a))};this.isSupported=oe("web_app_setup_secondary_button",n.version),this.bgColor=o("bgColor",e.bgColor),this.textColor=o("textColor",e.textColor),this.position=r.stateGetter("position"),this.hasShineEffect=r.stateGetter("hasShineEffect"),this.isEnabled=r.stateGetter("isEnabled"),this.isLoaderVisible=r.stateGetter("isLoaderVisible"),this.text=r.stateGetter("text"),this.isVisible=r.stateGetter("isVisible"),this.isMounted=r.isMounted,this.state=r.state,[this.setPosition,this.setPositionFp]=r.stateSetters("position"),[this.setBgColor,this.setBgColorFp]=r.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=r.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=r.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=r.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=r.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=r.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=r.stateBoolSetters("isVisible"),this.setParams=r.setState,this.setParamsFp=r.setStateFp,this.onClick=r.onClick,this.onClickFp=r.onClickFp,this.offClick=r.offClick,this.offClickFp=r.offClickFp,this.mount=r.mount,this.mountFp=r.mountFp,this.unmount=r.unmount}}function Oa(){return new cs(ns("secondaryButton","secondary_button_pressed",{bgColor:S(()=>ss.bottomBarColorRgb()||"#000000"),textColor:S(()=>ze.buttonColor()||"#2481cc")}))}const ja=Oa();class ls{constructor({isTma:e,request:n,version:r,createRequestId:o}){s(this,"getItemFp");s(this,"getItem");s(this,"restoreItemFp");s(this,"restoreItem");s(this,"setItemFp");s(this,"setItem");s(this,"deleteItemFp");s(this,"deleteItem");s(this,"clearFp");s(this,"clear");const i=T({version:r,requires:"web_app_secure_storage_get_key",isTma:e,returns:"task"}),a=(u,c,l)=>{const d=o();return h(n(u,["secure_storage_failed",c],{params:{...l,req_id:d},capture:f=>"payload"in f?f.payload.req_id===d:!0}),te(f=>f.event==="secure_storage_failed"?D(new kr(f.payload.error||"UNKNOWN_ERROR")):P(f.payload)))};this.getItemFp=i(u=>h(a("web_app_secure_storage_get_key","secure_storage_key_received",{key:u}),A(c=>({value:c.value,canRestore:!!c.can_restore})))),this.setItemFp=i((u,c)=>h(a("web_app_secure_storage_save_key","secure_storage_key_saved",{key:u,value:c}),A(()=>{}))),this.deleteItemFp=i(u=>this.setItemFp(u,null)),this.clearFp=i(()=>h(a("web_app_secure_storage_clear","secure_storage_cleared",{}),A(()=>{}))),this.restoreItemFp=i(u=>h(a("web_app_secure_storage_restore_key","secure_storage_key_restored",{key:u}),A(c=>c.value))),this.getItem=_(this.getItemFp),this.setItem=_(this.setItemFp),this.deleteItem=_(this.deleteItemFp),this.clear=_(this.clearFp),this.restoreItem=_(this.restoreItemFp)}}function Da(){return new ls(h(E(),I,Z,Wr))}const Ua=Da();class ps{constructor(e){s(this,"isVisible");s(this,"isMounted");s(this,"isSupported");s(this,"hideFp");s(this,"hide");s(this,"showFp");s(this,"show");s(this,"onClickFp");s(this,"onClick");s(this,"offClickFp");s(this,"offClick");s(this,"mountFp");s(this,"mount");s(this,"unmount");const n=new lt({...e,method:"web_app_setup_settings_button",payload:r=>({is_visible:r.isVisible}),initialState:{isVisible:!1}});this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.isSupported=n.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}const Wa=new ps(sn("settingsButton","settings_button_pressed"));class hs{constructor({postEvent:e,storage:n,isTma:r,isPageReload:o,version:i}){s(this,"isSupported");s(this,"isVerticalEnabled");s(this,"isMounted");s(this,"mountFp");s(this,"mount");s(this,"unmount");s(this,"disableVerticalFp");s(this,"disableVertical");s(this,"enableVerticalFp");s(this,"enableVertical");const a={isVerticalEnabled:!0},u=new _e({initialState:a,onChange(w){n.set(w)}}),c=new je({initialState:a,isPageReload:o,onMounted:u.setState,restoreState:n.get}),l={requires:"web_app_setup_swipe_behavior",isTma:r,version:i},d=T({...l,returns:"plain"}),f=T({...l,isMounted:c.isMounted,returns:"either"}),b=w=>{const F={isVerticalEnabled:w};return u.hasDiff(F)?h(e("web_app_setup_swipe_behavior",{allow_vertical_swipe:w}),z(()=>{u.setState(F)})):k(void 0)};this.isSupported=oe("web_app_setup_swipe_behavior",i),this.isVerticalEnabled=u.getter("isVerticalEnabled"),this.isMounted=c.isMounted,this.disableVerticalFp=f(()=>b(!1)),this.enableVerticalFp=f(()=>b(!0)),this.mountFp=d(()=>{const w=()=>{};return h(c.mount(),ae(w,w))}),this.unmount=c.unmount,this.disableVertical=_(this.disableVerticalFp),this.enableVertical=_(this.enableVerticalFp),this.mount=_(this.mountFp)}}function Ga(){return new hs(h(E(),K,I,we("swipeBehavior")))}const xa=Ga();async function Na(t){try{const{clipboard:n}=navigator;if(n)return await n.writeText(t)}catch{}const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}finally{document.body.removeChild(e)}}function Ha({request:t,...e}){return R((n,r,o)=>h(t("web_app_request_file_download","file_download_requested",{...o,params:{url:n,file_name:r}}),te(i=>i.status==="downloading"?P(void 0):D(new nn("User denied the action")))),{...e,requires:"web_app_request_file_download",returns:"task"})}function za(){return Ha(h(E(),Z,I))}const ds=za(),Ka=_(ds);function Ja({invokeCustomMethod:t,...e}){return R(n=>h(t("getCurrentTime",{},n),te(r=>{const o=jt(ie(me(),Mt(),le(i=>new Date(i*1e3)),Ye()),r);return o.success?P(o.output):D(new Ne(r,o.issues))})),{...e,requires:"web_app_invoke_custom_method",returns:"task"})}function Qa(){return Ja(h(E(),ln,I))}const fs=Qa(),Za=_(fs);function Xa({postEvent:t,...e}){return R(()=>t("web_app_hide_keyboard"),{...e,returns:"either",requires:"web_app_hide_keyboard"})}function Ya(){return Xa(h(E(),K,I))}const _s=Ya(),eu=_(_s);function tu({request:t,createRequestId:e,...n}){return R(r=>{const o=e();return h(t("web_app_read_text_from_clipboard","clipboard_text_received",{...r,params:{req_id:o},capture:wr(o)}),A(({data:i=null})=>i))},{...n,requires:"web_app_read_text_from_clipboard",returns:"task"})}function nu(){return tu({...h(E(),I,Z),createRequestId:pt})}const ms=nu(),ru=_(ms);function bs(t){const e={},n=t.match(/Telegram-Android(?:\/([^ ]+))?(?: (\([^)]+\))?|$)/);if(n){const[,r,o]=n;r&&(e.appVersion=r),o&&o.slice(1,o.length-1).split(";").forEach(i=>{const[a,u]=i.trim().split(" ");if(a==="Android")e.androidVersion=u;else if(a==="SDK"){const c=parseInt(u,10);c&&(e.sdkVersion=c)}else u?(e.manufacturer=a,e.model=u):e.performanceClass=a})}return e}function su(){return bs(navigator.userAgent)}function iu({postEvent:t,...e}){return R(n=>{const{size:r}=new Blob([n]);return!r||r>4096?M(new re(r?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data")):t("web_app_data_send",{data:n})},{...e,returns:"either"})}function ou(){return iu(h(E(),K))}const gs=ou(),au=_(gs);function uu({request:t,...e}){return R((n,r)=>h(t("web_app_send_prepared_message",["prepared_message_failed","prepared_message_sent"],{...r,params:{id:n}}),te(o=>o.event==="prepared_message_failed"?D(new qr(o.payload.error)):P(void 0))),{...e,requires:"web_app_send_prepared_message",returns:"task"})}function cu(){return uu(h(E(),Z,I))}const ws=cu(),lu=_(ws);function pu({postEvent:t,...e}){return R((n,r={})=>t("web_app_share_to_story",{text:r.text,media_url:n,widget_link:r.widgetLink}),{...e,requires:"web_app_share_to_story",returns:"either"})}function hu(){return pu(h(E(),K,I))}const vs=hu(),du=_(vs),gn=He(!1);function fu({isInlineMode:t,postEvent:e,...n}){return R((r,o)=>e("web_app_switch_inline_query",{query:r,chat_types:o||[]}),{...n,requires:{every:["web_app_switch_inline_query",()=>Y(t)?void 0:"The application must be launched in the inline mode"]},returns:"either"})}function _u(){return fu({...h(E(),K,I),isInlineMode:gn})}const ys=_u(),mu=_(ys);class Fs{constructor({storage:e,isPageReload:n,onContentSafeAreaInsetsChanged:r,onSafeAreaInsetsChanged:o,onViewportChanged:i,onFullscreenChanged:a,offContentSafeAreaInsetsChanged:u,offFullscreenChanged:c,offSafeAreaInsetsChanged:l,offViewportChanged:d,request:f,isViewportStable:b,isFullscreen:w,isTma:F,version:C,postEvent:g}){s(this,"state");s(this,"height");s(this,"stableHeight");s(this,"width");s(this,"isExpanded");s(this,"isStable",S(()=>this.height()===this.stableHeight()));s(this,"contentSafeAreaInsets");s(this,"contentSafeAreaInsetTop");s(this,"contentSafeAreaInsetLeft");s(this,"contentSafeAreaInsetRight");s(this,"contentSafeAreaInsetBottom");s(this,"safeAreaInsets");s(this,"safeAreaInsetTop");s(this,"safeAreaInsetLeft");s(this,"safeAreaInsetRight");s(this,"safeAreaInsetBottom");s(this,"isFullscreen");s(this,"requestFullscreenFp");s(this,"requestFullscreen");s(this,"exitFullscreenFp");s(this,"exitFullscreen");s(this,"isCssVarsBound");s(this,"bindCssVarsFp");s(this,"bindCssVars");s(this,"isMounted");s(this,"mountFp");s(this,"mount");s(this,"expandFp");s(this,"expand");const v={top:0,right:0,left:0,bottom:0},m=new _e({initialState:{contentSafeAreaInsets:v,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:v,stableHeight:0,width:0},onChange:e.set}),O=B=>{m.setState({isExpanded:B.is_expanded,height:B.height,width:B.width,stableHeight:B.is_state_stable?B.height:void 0})},j=B=>{m.setState({isFullscreen:B.is_fullscreen})},U=B=>{m.setState({safeAreaInsets:B})},$=B=>{m.setState({contentSafeAreaInsets:B})},V=new on({initialState(B){const Ee=de=>()=>{const[ve,se]=de==="safe-area"?["web_app_request_safe_area","safe_area_changed"]:["web_app_request_content_safe_area","content_safe_area_changed"];return he(ve,Y(C))?f(ve,se,B):P({top:0,left:0,right:0,bottom:0})},N=de=>()=>typeof de=="boolean"?P(de):Ct(de());return h(Ei,Ze("safeAreaInsets",Ee("safe-area")),Ze("contentSafeAreaInsets",Ee("content-safe-area")),Ze("isFullscreen",N(w)),Ze("isViewportStable",N(b)),ue(({isViewportStable:de,...ve})=>de?P({...ve,height:window.innerHeight,isExpanded:!0,stableHeight:window.innerHeight,width:window.innerWidth}):h(f("web_app_request_viewport","viewport_changed",B),A(se=>({...ve,height:se.height,isExpanded:se.is_expanded,stableHeight:se.is_state_stable?se.height:0,width:se.width})))))},isPageReload:n,onMounted(B){i(O),a(j),o(U),r($),m.setState(B)},onUnmounted(){d(O),c(j),l(U),u($)},restoreState:e.get}),L=B=>S(()=>this.safeAreaInsets()[B]),x=B=>S(()=>this.contentSafeAreaInsets()[B]);this.state=m.state,this.height=m.getter("height"),this.stableHeight=m.getter("stableHeight"),this.width=m.getter("width"),this.isExpanded=m.getter("isExpanded"),this.safeAreaInsets=m.getter("safeAreaInsets"),this.safeAreaInsetTop=L("top"),this.safeAreaInsetBottom=L("bottom"),this.safeAreaInsetLeft=L("left"),this.safeAreaInsetRight=L("right"),this.contentSafeAreaInsets=m.getter("contentSafeAreaInsets"),this.contentSafeAreaInsetTop=x("top"),this.contentSafeAreaInsetBottom=x("bottom"),this.contentSafeAreaInsetLeft=x("left"),this.contentSafeAreaInsetRight=x("right");const Pe=T({isTma:F,returns:"task"}),Ke=T({isTma:F,returns:"either"}),vu=T({isTma:F,requires:"web_app_request_fullscreen",version:C,returns:"task"}),Cs=B=>vu(Ee=>h(f(B?"web_app_request_fullscreen":"web_app_exit_fullscreen",["fullscreen_changed","fullscreen_failed"],Ee),te(N=>N.event==="fullscreen_failed"&&N.payload.error!=="ALREADY_FULLSCREEN"?D(new Ar(N.payload.error)):(m.setState({isFullscreen:"is_fullscreen"in N.payload?N.payload.is_fullscreen:!0}),P(void 0)))));this.isMounted=V.isMounted,this.mountFp=Pe(V.mount),this.mount=_(this.mountFp),this.isFullscreen=m.getter("isFullscreen"),this.requestFullscreenFp=Cs(!0),this.requestFullscreen=_(this.requestFullscreenFp),this.exitFullscreenFp=Cs(!1),this.exitFullscreen=_(this.exitFullscreenFp);const ht=W(!1);this.isCssVarsBound=S(ht),this.bindCssVarsFp=Ke(B=>{if(ht())return M(new ut);B||(B=N=>`--tg-viewport-${On(N)}`);const Ee=[["height",this.height],["stableHeight",this.stableHeight],["width",this.width],["safeAreaInsetTop",this.safeAreaInsetTop],["safeAreaInsetBottom",this.safeAreaInsetBottom],["safeAreaInsetLeft",this.safeAreaInsetLeft],["safeAreaInsetRight",this.safeAreaInsetRight],["contentSafeAreaInsetTop",this.contentSafeAreaInsetTop],["contentSafeAreaInsetBottom",this.contentSafeAreaInsetBottom],["contentSafeAreaInsetLeft",this.contentSafeAreaInsetLeft],["contentSafeAreaInsetRight",this.contentSafeAreaInsetRight]].reduce((N,[de,ve])=>{const se=B(de);if(se){const ks=()=>{hn(se,`${ve()}px`)};N.push({update:ks,removeListener:ve.sub(ks),cssVar:se})}return N},[]);return Ee.forEach(N=>{N.update()}),ht.set(!0),k(()=>{Ee.forEach(N=>{N.removeListener(),dn(N.cssVar)}),ht.set(!1)})}),this.bindCssVars=_(this.bindCssVarsFp),this.expandFp=Ke(()=>g("web_app_expand")),this.expand=_(this.expandFp)}}function bu(){const t=i=>({on:a=>{ee(i,a)},off:a=>{Se(i,a)}}),e=t("viewport_changed"),n=t("fullscreen_changed"),r=t("safe_area_changed"),o=t("content_safe_area_changed");return new Fs({...h(E(),we("viewport"),I,K,Z),isFullscreen(){return h(Me(),z(i=>!!i.tgWebAppFullscreen))},isViewportStable(){return h(Me(),z(i=>["macos","tdesktop","unigram","webk","weba","web"].includes(i.tgWebAppPlatform)))},offContentSafeAreaInsetsChanged:o.off,offFullscreenChanged:n.off,offSafeAreaInsetsChanged:r.off,offViewportChanged:e.off,onContentSafeAreaInsetsChanged:o.on,onFullscreenChanged:n.on,onSafeAreaInsetsChanged:r.on,onViewportChanged:e.on})}const gu=bu();function Ss(t={}){const{version:e,isInlineMode:n,themeParams:r}=t;if(e&&typeof n=="boolean"&&r)rn.set(e),gn.set(n),_n.set(r);else{const u=h(Me(),wt(c=>c,c=>{rn.set(e||c.tgWebAppVersion),gn.set(typeof n=="boolean"?n:!!c.tgWebAppBotInline),_n.set(r||c.tgWebAppThemeParams)}));if(u)return M(u)}t.postEvent&&Br.set(t.postEvent);const[o,i]=Ue(ee("reload_iframe",()=>{pe().log("Received a request to reload the page"),Pr("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:a=!0}=t;if(a){const u=document.createElement("style");u.id="telegram-custom-styles",document.head.appendChild(u),o(ee("set_custom_style",c=>{u.innerHTML=c}),()=>{document.head.removeChild(u)})}return h(ke("iframe_ready",{reload_supported:!0}),z(()=>(pe().log("The package was initialized"),i)))}const wu=ne(Ss);return p.AccessDeniedError=nn,p.BackButton=Mr,p.Biometry=Rr,p.CSSVarsBoundError=ut,p.CancelledError=Rn,p.ClosingBehavior=Or,p.CloudStorage=jr,p.ConcurrentCallError=ct,p.DeviceStorage=Ur,p.DeviceStorageMethodError=Cr,p.FullscreenFailedError=Ar,p.FunctionUnavailableError=$r,p.HapticFeedback=Nr,p.InitData=Kr,p.InvalidArgumentsError=re,p.InvalidEnvError=$o,p.InvalidLaunchParamsError=ur,p.Invoice=Jr,p.InvokeCustomMethodFailedError=cr,p.LaunchParamsRetrieveError=ar,p.LocationManager=Xr,p.MainButton=Yr,p.MethodParameterUnsupportedError=or,p.MethodUnsupportedError=ir,p.MiniApp=rs,p.NotAvailableError=Er,p.Popup=is,p.QrScanner=us,p.SecondaryButton=cs,p.SecureStorage=ls,p.SecureStorageMethodError=kr,p.SetEmojiStatusError=Ir,p.SettingsButton=ps,p.ShareMessageError=qr,p.SwipeBehavior=hs,p.ThemeParams=ts,p.TimeoutError=Ut,p.UnknownEnvError=zt,p.UnknownThemeParamsKeyError=Tr,p.ValidationError=Ne,p.Viewport=Fs,p.addToHomeScreen=Xo,p.addToHomeScreenFp=Hr,p.applyPolyfills=Fo,p.backButton=To,p.biometry=Lo,p.checkHomeScreenStatus=ta,p.checkHomeScreenStatusFp=zr,p.closingBehavior=Vo,p.cloudStorage=jo,p.copyTextToClipboard=Na,p.createLogger=Un,p.createPostEvent=wo,p.createRequestId=pt,p.createStartParam=Co,p.createStartParamFp=Fr,p.debug=dr,p.decodeBase64Url=So,p.decodeBase64UrlFp=en,p.decodeStartParam=ko,p.decodeStartParamFp=Sr,p.deepSnakeToCamelObjKeys=Wt,p.deviceStorage=Uo,p.downloadFile=Ka,p.downloadFileFp=ds,p.emitEvent=it,p.encodeBase64Url=tn,p.getCurrentTime=Za,p.getCurrentTimeFp=fs,p.getReleaseVersion=Yt,p.hapticFeedback=Jo,p.hideKeyboard=eu,p.hideKeyboardFp=_s,p.init=wu,p.initData=ra,p.initFp=Ss,p.invoice=ia,p.invokeCustomMethod=Dr,p.isAnyRGB=Hn,p.isColorDark=fn,p.isColorDarkFp=es,p.isRGB=Ge,p.isRGBA=Nn,p.isRGBAShort=xn,p.isRGBShort=Gn,p.isSafeToCreateStartParam=Eo,p.isTMA=mo,p.isTMAFp=Xt,p.locationManager=ba,p.logger=pe,p.mainButton=wa,p.miniApp=ss,p.mockTelegramEnv=bo,p.off=Se,p.offAll=ho,p.on=ee,p.openLink=ua,p.openLinkFp=Qr,p.openTelegramLink=pa,p.openTelegramLinkFp=pn,p.parseInitDataQuery=to,p.parseInitDataQueryFp=Xn,p.parseLaunchParamsQuery=Yn,p.parseLaunchParamsQueryFp=st,p.popup=Sa,p.postEvent=Pr,p.postEventFp=ke,p.qrScanner=Va,p.readTextFromClipboard=ru,p.readTextFromClipboardFp=ms,p.request=Mo,p.request2=Bo,p.request2Fp=un,p.requestContact=Ma,p.requestContactComplete=Ta,p.requestContactCompleteFp=bn,p.requestContactFp=os,p.requestEmojiStatusAccess=xo,p.requestEmojiStatusAccessFp=Gr,p.requestFp=Vr,p.requestPhoneAccess=Ea,p.requestPhoneAccessFp=mn,p.requestWriteAccess=La,p.requestWriteAccessFp=as,p.retrieveAndroidDeviceData=su,p.retrieveAndroidDeviceDataFrom=bs,p.retrieveLaunchParams=ro,p.retrieveLaunchParamsFp=Me,p.retrieveRawInitData=so,p.retrieveRawInitDataFp=Kt,p.retrieveRawLaunchParams=io,p.retrieveRawLaunchParamsFp=xe,p.secondaryButton=ja,p.secureStorage=Ua,p.sendData=au,p.sendDataFp=gs,p.serializeInitDataQuery=tr,p.serializeLaunchParamsQuery=nr,p.setDebug=uo,p.setEmojiStatus=zo,p.setEmojiStatusFp=xr,p.setTargetOrigin=co,p.settingsButton=Wa,p.shareMessage=lu,p.shareMessageFp=ws,p.shareStory=du,p.shareStoryFp=vs,p.shareURL=fa,p.shareURLFp=Zr,p.supports=he,p.swipeBehavior=xa,p.switchInlineQuery=mu,p.switchInlineQueryFp=ys,p.targetOrigin=fr,p.themeParams=ze,p.toRGB=Ji,p.toRGBFp=Kn,p.toRGBFull=Qi,p.toRGBFullFp=rt,p.viewport=gu,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),p}({});
//# sourceMappingURL=index.iife.js.map
